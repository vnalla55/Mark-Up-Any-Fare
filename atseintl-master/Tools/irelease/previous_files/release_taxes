[ATSEv2]

Title: Unit tests and Makefiles fix
Date: 08/01/2013
Description:
        Whole project building.
        Single directories build.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes
        /vobs/atseintl/Taxes/AtpcoTaxes/Common/Makefile
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Db/Makefile
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/Makefile
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Services
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Services/Makefile
        /vobs/atseintl/Taxes/AtpcoTaxes/Makefile
        /vobs/atseintl/Taxes/AtpcoTaxes/makefile_dir
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/Makefile
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/Makefile
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/Makefile
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: [S-332972] Validate Tax Point Loc 2 Stopover Tag Loc 2 Stopover Tag=T
Date: 08/02/2013
Description:
        Implemented technical story. Refactored GeoLoc2 departure and arrival rules/applicators into one.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        New:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Applicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Applicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Rule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Rule.cpp
        Deleted:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2DepartureRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2DepartureRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2DepartureApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2DepartureApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2ArrivalRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2ArrivalRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2ArrivalApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2ArrivalApplicator.h
        Modified:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules@@/main/atsev2_Integration/24
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp@@/main/atsev2_Integration/27
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointUtils.h@@/main/atsev2_Integration/12
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc2ApplicatorTest.cpp@@/main/atsev2_Integration/6
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc2ApplicatorTest.cpp@@/main/atsev2_Integration/7
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc2ApplicatorTest.cpp@@/main/atsev2_Integration/8
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/MileageCacheImpl.h@@/main/atsev2_Integration/3
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/MileageCacheImpl.cpp@@/main/atsev2_Integration/4
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Services/MileageCache.h@@/main/atsev2_Integration/4
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Services/MileageCache.cpp@@/main/atsev2_Integration/3
        /vobs/atseintl/Taxes/AtpcoTaxes/test/MileageCacheMock.h@@/main/atsev2_Integration/3
        /vobs/atseintl/Taxes/AtpcoTaxes/test/MileageCacheMock.h@@/main/atsev2_Integration/4
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc2ApplicatorTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Aleksander Hryniewiecki
Code reviewers: .
BA: 
QA: 

Title: Unit tests and Makefiles fix
Date: 08/02/2013
Description:
        Added single unit tests build and run.
         Added grouped unit tests build and run.
         Added all unit tests build and run.
         Added unit tests build and run from directory level.
         Simplified and generalized single directory build.
         Separated common code - assertion_failed.cpp.
         Fixed relative paths in tests xmls.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: Makefile refactoring
Date: 08/05/2013
Description:
        .
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Makefile
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [X] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: S-309672 Validation of currency of sale
Date: 08/06/2013
Description:
        Validation of currency of sale.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
        N/A
Entry/XML to recreate:
        <TaxRq>
          <PointOfSale PointOfSaleLoc="DAL" />
          <ProcessingOptions TicketingDate="2013-08-02" />
         <bgcolor=yellow> <TicketingOptions FormOfPayment="M" PaymentCurrency="PLN" /></bgcolor>
          <GeoPath>
            <Geo Loc="WAW" Type="D" />
            <Geo Loc="GOT" Type="A" />
            <Geo Loc="GOT" Type="D" />
            <Geo Loc="LHR" Type="A" />
            <Geo Loc="LHR" Type="D" />
            <Geo Loc="FRA" Type="A" />
          </GeoPath>
          <FarePath>
            <FareUsage Index="0" />
          </FarePath>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0" />
              <Map Index="1" />
              <Map Index="2" />
              <Map Index="3" />
              <Map Index="4" />
              <Map Index="5" />
            </Mapping>
          </GeoPathMapping>
          <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="DY" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH" />
          <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-09-01">
            <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
          </Itin>
          <Cache>
            <RulesRecord <bgcolor=yellow>CURRENCYOFSALE="ZZZ"</bgcolor> NATION="SE" PERCENTFLATTAG="F" SEQNO="101" TAXAMT="11" TAXCODE="AA" TAXPOINTTAG="D" TAXTYPE="001" />
            <Loc LocCode="DAL" NationCode="US" />
            <Loc LocCode="LHR" NationCode="GB" />
            <Loc LocCode="WAW" NationCode="PL" />
            <Loc LocCode="GOT" NationCode="SE" />
            <Loc LocCode="FRA" NationCode="DE" />
          </Cache>
        </TaxRq>
Example before:
        N/A
Example after:
        N/A
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Common/Consts.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Common/SafeEnumDefs.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Common/SafeEnums.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/Request.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/CurrencyOfSaleApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/CurrencyOfSaleApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/CurrencyOfSaleRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/CurrencyOfSaleRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlParser.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/Types.h
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/test/XmlParserTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/RulesTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/CurrencyOfSaleApplicatorTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Maciej Krawczyk
Code reviewers: Piotr Lach
BA: 
QA: 

Title: Add TicketingPoint to Request/TicketingOptions and handle it in Xml Request
Date: 08/06/2013
Description:
        TK-636134 Add TicketingPoint to Request/TicketingOptions and handle it in Xml Request from story
        S-316213 Point of Ticketing -GEO specification
Applies to:
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        N/A
Example after:
        N/A
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/Request.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlParser.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: Unit tests and Makefiles fix
Date: 08/06/2013
Description:
        Splitting makefiles into simple files.
        Removed empty RulesRecord.cpp.
        Removed unused Server/Parser.h.
        Fixed relative xml paths in unit tests.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        .
        coverage.mk
        Interfaces/Db
        Makefile
        Server
        test
        test/mainPath.h
        tests.mk
        xtaxserver.mk
Unit tests files:
        Rules/test
        Rules/test/BrApplTicketedPointTag.cpp
        Rules/test/ContinuousJourneyTest.cpp
        Rules/test/JourneyGeoSpecJourneyIncludesApplicatorTest.cpp
        Rules/test/JourneyGeoSpecLoc1AsOriginApplicatorTest.cpp
        Rules/test/JourneyGeoSpecTravelWhollyWithinApplicatorTest.cpp
        Rules/test/Loc2IntlDomTest.cpp
        Rules/test/TaxPointLoc2CompareTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: TK-636136  Handle in xml field .. ,and TK-636137 Implement applicator
Date: 08/08/2013
Description:
        Implemented tasks:
        TK-636136 Handle in xml fields POTKTLOCTYPE/POTKTLOC/POTKTLOCZONETBLNO,
        TK-636137 Implement applicator
        from "S-316213 Point of Ticketing -GEO specification" story
Applies to:
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
        <TaxRq>
          <PointOfSale PointOfSaleLoc="DAL" />
          <ProcessingOptions TicketingDate="2013-07-22" />
          <TicketingOptions TicketingPoint="LAX" />
          <GeoPath>
            <Geo Loc="LAX" Type="D" />
            <Geo Loc="FRA" Type="A" />
            <Geo Loc="DFW" Type="D" />
            <Geo Loc="LHR" Type="A" />
            <Geo Loc="LHR" Type="D" />
            <Geo Loc="FRA" Type="A" />
            <Geo Loc="FRA" Type="D" />
            <Geo Loc="LAX" Type="A" />
          </GeoPath>
          <FarePath>
            <FareUsage Index="0" />
          </FarePath>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0" />
              <Map Index="1" />
              <Map Index="2" />
              <Map Index="3" />
              <Map Index="4" />
              <Map Index="5" />
              <Map Index="6" />
              <Map Index="7" />
            </Mapping>
          </GeoPathMapping>
          <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
          <Flight ArrivalDateShift="0" ArrivalTime="21:15" DepartureTime="17:34" MarketingCarrier="AA" />
          <Flight ArrivalDateShift="1" ArrivalTime="07:23" DepartureTime="23:55" MarketingCarrier="UA" />
          <Flight ArrivalDateShift="0" ArrivalTime="20:18" DepartureTime="07:24" MarketingCarrier="LH" />
          <Flight ArrivalDateShift="1" ArrivalTime="07:18" DepartureTime="21:31" MarketingCarrier="DA" />
          <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-08-15">
            <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
            <FlightUsage ConnectionDateShift="0" FlightIndex="1" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
            <FlightUsage ConnectionDateShift="0" FlightIndex="3" />
          </Itin>
          <Fare Amount="111" BasisCode="X2RT" Directionality="I" OneWayRoundTrip="O" TypeCode="PSD" />
          <Cache>
            <RulesRecord NATION="US" POTKTLOC="US" POTKTLOCTYPE="N" VENDOR="ATPCO" />
            <Loc LocCode="MIA" NationCode="US" />
            <Loc LocCode="DFW" NationCode="US" />
            <Loc LocCode="LAX" NationCode="US" />
            <Loc LocCode="WAW" NationCode="PL" />
            <Loc LocCode="KRA" NationCode="PL" />
            <Loc LocCode="GDN" NationCode="PL" />
            <Loc LocCode="KTW" NationCode="PL" />
            <Loc LocCode="LHR" NationCode="GB" />
            <Loc LocCode="FRA" NationCode="DE" />
            <Loc LocCode="MEX" NationCode="MX" />
            <Loc LocCode="SJU" NationCode="PR" />
            <IsInLoc LocCode="124" LocType="Z" Vendor="ATPCO">
              <LocUsage LocId="3" />
              <LocUsage LocId="4" />
              <LocUsage LocId="5" />
              <LocUsage LocId="6" />
              <LocUsage LocId="7" />
              <LocUsage LocId="8" />
            </IsInLoc>
            <IsInLoc LocCode="TX" LocType="S" Vendor="ATPCO">
              <LocUsage LocId="1" />
            </IsInLoc>
            <IsInLoc LocCode="PL" LocType="N" Vendor="ATPCO">
              <LocUsage LocId="3" />
              <LocUsage LocId="4" />
              <LocUsage LocId="5" />
              <LocUsage LocId="6" />
            </IsInLoc>
            <IsInLoc LocCode="US" LocType="N" Vendor="ATPCO">
              <LocUsage LocId="0" />
              <LocUsage LocId="1" />
              <LocUsage LocId="2" />
            </IsInLoc>
            <IsInLoc LocCode="GB" LocType="N" Vendor="ATPCO">
              <LocUsage LocId="7" />
            </IsInLoc>
            <Mileage GeoPathIndex="0">
              <Distance FromGeoIndex="0" Miles="559" ToGeoIndex="1" />
              <Distance FromGeoIndex="0" Miles="559" ToGeoIndex="2" />
              <Distance FromGeoIndex="0" Miles="5286" ToGeoIndex="3" />
              <Distance FromGeoIndex="0" Miles="5286" ToGeoIndex="4" />
              <Distance FromGeoIndex="0" Miles="5486" ToGeoIndex="5" />
              <Distance FromGeoIndex="0" Miles="5486" ToGeoIndex="6" />
              <Distance FromGeoIndex="0" Miles="0" ToGeoIndex="7" />
            </Mileage>
          </Cache>
        </TaxRq><br>
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlParser.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PointOfTicketingRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PointOfTicketingRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PointOfTicketingApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PointOfTicketingApplicator.h
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/PointOfTicketingTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: Unit tests and Makefiles fix
Date: 08/07/2013
Description:
        Adding .d dependencies files.
        Adding LD_LIBRARY_PATH
        Adding noop to cppunit-report target
        Adding phony targets to .PHONY
        Adding reports-clean target.
        Adding Server tests coverage
        Adding single tests run
        Cobertura report fix.
        Coverage
        Fixing clean.
        Splitting Makefile.
        unused variable in Makefile
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: Response refactoring
Date: 08/08/2013
Description:
        Created simple class DiagnosticResponse, that will be refactored in the next task.
        Refactoring of existing diagnostics.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Rules/BuildInfoDiagnostic.cpp
        Rules/BuildInfoDiagnostic.h
        Rules/BusinessRulesProcessor.cpp
        Rules/DBDiagnostic.cpp
        Rules/DBDiagnostic.h
        Rules/Diagnostic.cpp
        Rules/Diagnostic.h
        Rules/DiagnosticResponse.h
        Rules/NegativeDiagnostic.cpp
        Rules/NegativeDiagnostic.h
        Rules/PositiveDiagnostic.cpp
        Rules/PositiveDiagnostic.h
        Rules/RequestDiagnostic.cpp
        Rules/RequestDiagnostic.h
        Rules/Response.h
        Server/XmlWriter.cpp
        test/XmlAndDiagnosticFixture.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: Response refactoring
Date: 08/09/2013
Description:
        Removing diagnostic creation from Response.
         Adding diagnostic creation to BusinessRulesProcessor.
         Making Response class passive.
         Making ItinsPayments class passive.
        Moving diagnostics to Diagnostic/
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Rules
         Rules/DBDiagnostic.cpp
         Rules/ItinPayments.h
         Rules/PositiveDiagnostic.cpp
         Rules/RequestDiagnostic.cpp
         Rules/BusinessRulesProcessor.h
         test/XmlAndDiagnosticFixture.cpp
         Rules/DBDiagnostic.h
         Server/Engine.cpp
         Rules/Diagnostic.cpp
         Server/XmlWriter.cpp
         Rules/Response.h
         Rules/PositiveDiagnostic.h
         Rules/DiagnosticResponse.h
         Rules/ItinsPayments.h
         Rules/NegativeDiagnostic.h
         Rules/BuildInfoDiagnostic.h
         Rules/BuildInfoDiagnostic.cpp
         Rules/NegativeDiagnostic.cpp
         Rules/Diagnostic.h
         Rules/RequestDiagnostic.h
         Rules/BusinessRulesProcessor.cpp
        .
        Diagnostic
        Makefile
        ./Diagnostic/BuildInfoDiagnostic.cpp
        ./Diagnostic/BuildInfoDiagnostic.h
        ./Diagnostic/DBDiagnostic.cpp
        ./Diagnostic/DBDiagnostic.h
        ./Diagnostic/Diagnostic.cpp
        ./Diagnostic/NegativeDiagnostic.cpp
        ./Diagnostic/NegativeDiagnostic.h
        ./Diagnostic/PositiveDiagnostic.cpp
        ./Diagnostic/PositiveDiagnostic.h
        ./Diagnostic/RequestDiagnostic.cpp
        ./Diagnostic/RequestDiagnostic.h
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: TK-636153 Refactoring
Date: 08/12/2013
Description:
        TK-636153 Refactoring from story S-316213 Point of Ticketing -GEO specification
Applies to:
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesProcessor.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Diagnostic/NegativeDiagnostic.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Diagnostic/PositiveDiagnostic.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoIntlDomLoc2IndApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc1Applicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc1TransferTypeApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TicketedPointApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TravelDatesApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlWriter.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/BrApplTicketedPointTag.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/test/PaymentDetailMock.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/test/PaymentDetailMock.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc2ApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoIntlDomLoc1IndApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointLoc2CompareApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointLoc3AsNextStopoverApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointLoc3AsPreviousPointApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointLoc3AsPreviousPointApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Applicator.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: S-309674 Apply the Tax Percent for itenerary tax only and process the decimal point for Flat Taxes
Date: 08/12/2013
Description:
        S-309674 Apply the Tax Percent for itenerary tax only and process the decimal point for Flat Taxes
        TK-636139 DEV - Decimal Point
        TK-636138 DEV - Apply Percent Tax
        TK-636129 DEV - Unit tests
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
        <TaxRq>
          <PointOfSale PointOfSaleLoc="YYZ" />
          <ProcessingOptions TicketingDate="2013-04-30" />
          <GeoPath>
            <Geo Type="D" Loc="YAA" />
            <Geo Type="A" Loc="YBB" />
          </GeoPath>
          <Fare BasisCode="WFM0FR" TypeCode="PSD" OneWayRoundTrip="O" Directionality=" " Amount="12" />
          <FarePath TotalAmount="34" ValidatingCarrier="AP">
            <FareUsage Index="0" />
          </FarePath>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0" />
              <Map Index="1" />
            </Mapping>
          </GeoPathMapping>
          <Itin Id="0" GeoPathIndex="0" FarePathIndex="0" FarePathGeoPathMappingIndex="0" />
          <Cache>
            <RulesRecord VENDOR="ATPCO" NATION="CA" TAXCODE="XX" TAXPOINTTAG="D" PERCENTFLATTAG="F" TAXTYPE="001" SEQNO="200" TAXAMT="9000" TAXCURDECIMALS="3"/>
            <Loc NationCode="CA" LocCode="YAA"/>
            <Loc NationCode="CA" LocCode="YBB"/>
          </Cache>
        </TaxRq><br>
Example before:
        ************************************************************
                  ----DIAGNOSTIC 802 - TAX APPLICATION----
        ************************************************************
        ----------------------- SEQS ANALYSIS ----------------------<br>
                  ----            ITIN: 1             ----<br>
        NATION CODE TYPE TXPT P/F TXAMT LOC1 LOC2 LOC3 SEQ<br>
         1  CA    XX   001   D   F   9   YAA  YBB      200
Example after:
        ************************************************************
                  ----DIAGNOSTIC 802 - TAX APPLICATION----
        ************************************************************
        ----------------------- SEQS ANALYSIS ----------------------<br>
                  ----            ITIN: 1             ----<br>
        NATION CODE TYPE TXPT P/F TXAMT LOC1 LOC2 LOC3 SEQ<br>
         1  CA    XX   001   D   F  9.000  YAA  YBB      200<br>
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/Types.h  
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlParser.cpp 
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Common/SafeEnumDefs.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Common/SafeEnums.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxRule.cpp 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxRule.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.cpp 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.cpp 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.cpp 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Diagnostic/PositiveDiagnostic.cpp   
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/test/XmlParserTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/FlatTaxTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/PercentageTaxTest.cpp
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/test/XmlParserTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/FlatTaxTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/PercentageTaxTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [X] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Badarycz
Code reviewers: n/a
BA: 
QA: 

Title: Response refactoring
Date: 08/12/2013
Description:
        Unit tests for diagnostic.
        Adding single directory Makefiles.
        Removed unused code.
        Fixed header inclusion.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Diagnostic@@/main/atsev2_Integration/2
        Diagnostic/RequestDiagnostic.cpp@@/main/atsev2_Integration/8
        test/mainPath.h@@/main/atsev2_Integration/2
        Diagnostic/Makefile@@/main/atsev2_Integration/1
        Diagnostic/test/Makefile@@/main/atsev2_Integration/1
        Diagnostic/test/Makefile@@/main/atsev2_Integration/0
        Diagnostic/test/Makefile@@/main/atsev2_Integration
        Diagnostic/Makefile@@/main/atsev2_Integration/0
        Diagnostic/Makefile@@/main/atsev2_Integration
        makefile_dir_test@@/main/atsev2_Integration/6
Unit tests files:
        Diagnostic/test/RequestDiagnosticTest.cpp@@/main/atsev2_Integration/1
        Diagnostic/test/RequestDiagnosticTest.cpp@@/main/atsev2_Integration/0
        Diagnostic/test/RequestDiagnosticTest.cpp@@/main/atsev2_Integration
        Diagnostic/test@@/main/atsev2_Integration/1
        Diagnostic/test@@/main/atsev2_Integration/0
        Diagnostic/test@@/main/atsev2_Integration
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: ATPCO-43
Date: 08/13/2013
Description:
        Changed PaymentDetail::_taxPointEnd reference to value.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Rules/PaymentDetail.h@@/main/atsev2_Integration/27
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: S-334963 DEV - refactoring, CA Continuous Journey
Date: 08/13/2013
Description:
        CA Continuous Journey as separate rule added at the end of processing
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Badarycz
Code reviewers: n/a
BA: 
QA: 

Title: S-333080 ATPCO logic changes to Stopover Time Tag field= A
Date: 08/19/2013
Description:
        1.  If in the request Stopover Time Tag field= A and the Unit is blank it means following exemption is coded: 
        Non-standard domestic stopover means greater than 6 hours when arriving before<color=#000000>17:</color>00 local time and departing on a domestic flight or departing on a domestic flight after 10:00 on the next day if arriving <b>on</b>/ after 17:00)
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TimeStopoverChecker.cpp@@/main/atsev2_Integration/7
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TimeStopoverCheckerTest.cpp@@/main/atsev2_Integration/5
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TimeStopoverCheckerTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [X] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Aleksander Hryniewiecki
Code reviewers: Jacek Stania
BA: 
QA: 

Title: ATPCO-43
Date: 08/19/2013
Description:
        Changing loc2 reference to a pointer.
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        ./Rules/BusinessRulesProcessor.cpp
        ./Rules/BusinessRulesProcessor.h
        ./Rules/PaymentDetail.cpp
        ./Rules/PaymentDetail.h
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: Refactoring - Validate Tax Point Loc 2 Stopover Tag Loc 2 Stopover Tag=T
Date: 08/20/2013
Description:
        S-334964 Validate Tax Point Loc 2 Stopover Tag Loc 2 Stopover Tag=T (from iteration 20)
Applies to:
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
        n/a
Entry/XML to recreate:
        <TaxRq>
          <PointOfSale PointOfSaleLoc="DAL" />
          <ProcessingOptions TicketingDate="2013-08-06" />
          <GeoPath>
            <Geo Loc="JFK" Type="D" />
            <Geo Loc="LVS" Type="A" />
            <Geo Loc="LVS" Type="D" />
            <Geo Loc="CHI" Type="A" UnticketedTransfer="Y" />
            <Geo Loc="CHI" Type="D" UnticketedTransfer="Y" />
            <Geo Loc="MIA" Type="A" />
            <Geo Loc="MIA" Type="D" />
            <Geo Loc="DFW" Type="A" />
            <Geo Loc="DFW" Type="D" />
            <Geo Loc="LVS" Type="A" />
          </GeoPath>
          <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="BA" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH" />
          <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-09-05">
            <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="3" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="4" />
          </Itin>
          <Fare Amount="111" BasisCode="X2RT" Directionality="I" OneWayRoundTrip="O" TypeCode="PSD" />
          <Fare Amount="222" BasisCode="X2XX" Directionality="O" OneWayRoundTrip="O" TypeCode="YRT" />
          <Cache>
            <RulesRecord NATION="US" PERCENTFLATTAG="F" SEQNO="101" TAXAMT="11" TAXCODE="AA" TAXPOINTLOC2STOPOVERTAG="T" TAXPOINTTAG="A" TAXTYPE="001" TICKETEDPOINTTAG=" " />
            <RulesRecord NATION="US" PERCENTFLATTAG="F" SEQNO="102" TAXAMT="13" TAXCODE="AB" TAXPOINTLOC2STOPOVERTAG="T" TAXPOINTTAG="D" TAXTYPE="002" TICKETEDPOINTTAG="U" />
            <RulesRecord NATION="US" PERCENTFLATTAG="F" SEQNO="103" TAXAMT="17" TAXCODE="AC" TAXPOINTLOC2STOPOVERTAG="T" TAXPOINTTAG="D" TAXTYPE="003" TICKETEDPOINTTAG=" " />
            <Loc LocCode="JFK" NationCode="US" />
            <Loc LocCode="DAL" NationCode="US" />
            <Loc LocCode="LVS" NationCode="US" />
            <Loc LocCode="DFW" NationCode="US" />
            <Loc LocCode="CHI" NationCode="US" />
            <Loc LocCode="MIA" NationCode="US" />
            <Mileage GeoPathIndex="0">
              <Distance FromGeoIndex="0" Miles="1000" ToGeoIndex="1" />
              <Distance FromGeoIndex="0" Miles="1000" ToGeoIndex="2" />
              <Distance FromGeoIndex="0" Miles="3000" ToGeoIndex="3" />
              <Distance FromGeoIndex="0" Miles="3000" ToGeoIndex="4" />
              <Distance FromGeoIndex="0" Miles="2000" ToGeoIndex="5" />
              <Distance FromGeoIndex="1" Miles="1000" ToGeoIndex="0" />
              <Distance FromGeoIndex="1" Miles="0" ToGeoIndex="2" />
              <Distance FromGeoIndex="1" Miles="1500" ToGeoIndex="3" />
              <Distance FromGeoIndex="1" Miles="1500" ToGeoIndex="4" />
              <Distance FromGeoIndex="1" Miles="1250" ToGeoIndex="5" />
              <Distance FromGeoIndex="2" Miles="0" ToGeoIndex="1" />
              <Distance FromGeoIndex="2" Miles="1000" ToGeoIndex="0" />
              <Distance FromGeoIndex="2" Miles="1500" ToGeoIndex="3" />
              <Distance FromGeoIndex="2" Miles="1500" ToGeoIndex="4" />
              <Distance FromGeoIndex="2" Miles="1250" ToGeoIndex="5" />
              <Distance FromGeoIndex="4" Miles="0" ToGeoIndex="3" />
              <Distance FromGeoIndex="4" Miles="1500" ToGeoIndex="2" />
              <Distance FromGeoIndex="4" Miles="1500" ToGeoIndex="1" />
              <Distance FromGeoIndex="4" Miles="3000" ToGeoIndex="0" />
              <Distance FromGeoIndex="4" Miles="2000" ToGeoIndex="5" />
              <Distance FromGeoIndex="5" Miles="2000" ToGeoIndex="4" />
              <Distance FromGeoIndex="5" Miles="2000" ToGeoIndex="3" />
              <Distance FromGeoIndex="5" Miles="1250" ToGeoIndex="2" />
              <Distance FromGeoIndex="5" Miles="1250" ToGeoIndex="1" />
              <Distance FromGeoIndex="5" Miles="2000" ToGeoIndex="0" />
              <Distance FromGeoIndex="6" Miles="3000" ToGeoIndex="7" />
              <Distance FromGeoIndex="6" Miles="3000" ToGeoIndex="8" />
              <Distance FromGeoIndex="6" Miles="2000" ToGeoIndex="9" />
              <Distance FromGeoIndex="7" Miles="3000" ToGeoIndex="6" />
              <Distance FromGeoIndex="7" Miles="0" ToGeoIndex="8" />
              <Distance FromGeoIndex="7" Miles="700" ToGeoIndex="9" />
              <Distance FromGeoIndex="8" Miles="0" ToGeoIndex="7" />
              <Distance FromGeoIndex="8" Miles="3000" ToGeoIndex="6" />
              <Distance FromGeoIndex="8" Miles="700" ToGeoIndex="9" />
              <Distance FromGeoIndex="9" Miles="700" ToGeoIndex="8" />
              <Distance FromGeoIndex="9" Miles="700" ToGeoIndex="7" />
              <Distance FromGeoIndex="9" Miles="2000" ToGeoIndex="6" />
            </Mileage>
          </Cache>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0" />
              <Map Index="1" />
              <Map Index="2" />
              <Map Index="3" />
              <Map Index="4" />
              <Map Index="5" />
            </Mapping>
            <Mapping>
              <Map Index="6" />
              <Map Index="7" />
              <Map Index="8" />
              <Map Index="9" />
            </Mapping>
          </GeoPathMapping>
          <FarePath>
            <FareUsage Index="0" />
            <FareUsage Index="1" />
          </FarePath>
        </TaxRq>
Example before:
        <TaxRs>
          <Itins>
            <Itin Id="0">
              <Tax Nation="US" PercentFlatTag="F" TaxCode="AA" TaxPointTag="A" TaxType="001" TotalAmt="22">
                <TaxDetail SeqNo="101" TaxAmt="11" TaxPointLoc1="LVS" TaxPointLoc1Index="9" TaxPointLoc2="MIA" TaxPointLoc2Index="6" />
                <TaxDetail SeqNo="101" TaxAmt="11" TaxPointLoc1="MIA" TaxPointLoc1Index="5" TaxPointLoc2="JFK" TaxPointLoc2Index="0" />
              </Tax>
              <Tax Nation="US" PercentFlatTag="F" TaxCode="AB" TaxPointTag="D" TaxType="002" TotalAmt="52">
                <TaxDetail SeqNo="102" TaxAmt="13" TaxPointLoc1="JFK" TaxPointLoc1Index="0" TaxPointLoc2="CHI" TaxPointLoc2Index="3" />
                <TaxDetail SeqNo="102" TaxAmt="13" TaxPointLoc1="CHI" TaxPointLoc1Index="4" TaxPointLoc2="MIA" TaxPointLoc2Index="5" />
                <TaxDetail SeqNo="102" TaxAmt="13" TaxPointLoc1="MIA" TaxPointLoc1Index="6" TaxPointLoc2="DFW" TaxPointLoc2Index="7" />
                <TaxDetail SeqNo="102" TaxAmt="13" TaxPointLoc1="DFW" TaxPointLoc1Index="8" TaxPointLoc2="LVS" TaxPointLoc2Index="9" />
              </Tax>
              <Tax Nation="US" PercentFlatTag="F" TaxCode="AC" TaxPointTag="D" TaxType="003" TotalAmt="51">
                <TaxDetail SeqNo="103" TaxAmt="17" TaxPointLoc1="JFK" TaxPointLoc1Index="0" TaxPointLoc2="MIA" TaxPointLoc2Index="5" />
                <TaxDetail SeqNo="103" TaxAmt="17" TaxPointLoc1="MIA" TaxPointLoc1Index="6" TaxPointLoc2="DFW" TaxPointLoc2Index="7" />
                <TaxDetail SeqNo="103" TaxAmt="17" TaxPointLoc1="DFW" TaxPointLoc1Index="8" TaxPointLoc2="LVS" TaxPointLoc2Index="9" />
              </Tax>
            </Itin>
          </Itins>
        </TaxRs>
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Services/MileageCache.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Services/MileageCache.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Applicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Applicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointUtils.h
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/MileageCacheImpl.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/MileageCacheImpl.h
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/test/MileageCacheMock.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/test/MileageCacheMock.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc2ApplicatorTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Maciej Krawczyk
Code reviewers: Piotr Lach
BA: 
QA: 

Title: ATPCO-43
Date: 08/21/2013
Description:
        Refactoring: extract method BusinessRulesProcessor::createDBDiagnostic()
         Refactoring: extract method BusinessRulesProcessor::analyzeRequest()
         Refactoring: extract method BusinessRulesProcessor::createRequestDiagnostic()
         Refactoring: extract method BusinessRulesProcessor::calculateRawPayments()
        Refactoring: extract method BusinessRulesProcessor::filterPaymentsByDiagnostic()
        Refactoring: extract method BusinessRulesProcessor::addBuildInfoDiagnosticToResponse()
        Refactoring: extract method BusinessRulesProcessor::createPostprocessResponse()
         Refactoring: change DiagnosticCommand class to passive data struct.
         Refactoring: move BuildInfoDiagnostic calculation at the end of the BusinessRulesProcessor::run().
        Refactoring: changing request to parameter instead of member field
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
        Please, pay attention to:
         - general end to end tests,
         - invalid xml tests,
         - all diagnostics tests
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Interfaces/Io/DiagnosticCommand.h
         Server/test/XmlParserTest.cpp
         test/XmlAndDiagnosticFixture.cpp
         Rules/BusinessRulesProcessor.h
         Rules/PaymentDetail.h
         Server/XmlParser.cpp
         Rules/BusinessRulesProcessor.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title:  S-317839 Validate Marketing/Operating Carrier Code
Date: 08/21/2013
Description:
        Parser is extended to understand a new <CarrierFltSeg> element under <Cache>, and two new attributes (CARRIERFLTITEMNO1 and CARRIERFLTITEMNO2).
Applies to:
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
        There's no logic yet behind this code, but the requests should not be rejected by the parser now. Also, please note there's a syntax change coming from Alek H: the <CarrierFltSeg> element will not be directly under <Cache>, there'll be a new intermediate element introduced called <CarrierFlight>.
Entry/XML to recreate:
        <TaxRq>
        ...
        <Cache>
        <RulesRecord ... CARRIERFLTITEMNO1="1" CARRIERFLTITEMNO2="999">
        <CarrierFltSeg VENDOR="ATP" ITEMNO="100" MARKETINGCARRIER="BA" OPERATINGCARRIER="AA" FLT1="1" FLT2="999">
        </TaxRq>
Example before:
        A parsing error.
Example after:
        A request is accepted (but not yet processed correctly).
Files updated:
        Interfaces/Db/CarrierFlightSegment.h (new file)
        Interfaces/Db/RulesRecord.h
        Interfaces/Io/XmlCache.h
        Server/XmlParser.cpp
Unit tests files:
        Server/test/XmlParserTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact:
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [X] Yes
Developer: Piotr Sulecki
Code reviewers: Piotr Lach
BA: 
QA: 

Title: D-103583 Problem with Geo and Mileage
Date: 08/22/2013
Description:
        Geo::samePointDifferentTag function is fixed.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        <TaxRq><br>
        <PointOfSale<br>
        <color=#ff0000>PointOfSaleLoc</color><color=#0000ff>="DAL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <ProcessingOptions<br>
        <color=#ff0000>TicketingDate</color><color=#0000ff>="2013-08-21" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <GeoPath><br>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="MIA" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="DFW" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="DFW" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="IAH" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#ff0000>UnticketedTransfer</color><color=#0000ff>="Y" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="IAH" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#ff0000>UnticketedTransfer</color><color=#0000ff>="Y" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="LGA" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="LGA" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="IAD" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </GeoPath><br>
        <FarePath><br>
        <FareUsage<br>
        <color=#ff0000>Index</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </FarePath><br>
        <GeoPathMapping><br>
        <Mapping><br>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="4" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="5" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="6" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="7" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Mapping><br>
        </GeoPathMapping><br>
        <Fare<br>
        <color=#ff0000>Amount</color><color=#0000ff>="100" </color><color=#ff0000>BasisCode</color><color=#0000ff>="X2RE" </color><color=#ff0000>Directionality</color><color=#0000ff>="O" </color><color=#ff0000>OneWayRoundTrip</color><color=#0000ff>="O" </color><color=#ff0000>TypeCode</color><color=#0000ff>="EU" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="AA" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="AA" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="DL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="DL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Itin<br>
        <color=#ff0000>FarePathGeoPathMappingIndex</color><color=#0000ff>="0" </color><color=#ff0000>FarePathIndex</color><color=#0000ff>="0" </color><color=#ff0000>GeoPathIndex</color><color=#0000ff>="0" </color><color=#ff0000>Id</color><color=#0000ff>="0" </color><color=#ff0000>TravelOriginDate</color><color=#0000ff>="2013-09-20"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="0" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="1" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="1" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="1" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Itin><br>
        <Cache><br>
        <RulesRecord<br>
        <color=#ff0000>CONNECTIONSTAG1</color><color=#0000ff>="H" </color><color=#ff0000>CONNECTIONSTAG2</color><color=#0000ff>="I" </color><color=#ff0000>CONNECTIONSTAG3</color><color=#0000ff>="C" </color><color=#ff0000>CONNECTIONSTAG4</color><color=#0000ff>="D" </color><color=#ff0000>CONNECTIONSTAG5</color><color=#0000ff>="E" </color><color=#ff0000>CONNECTIONSTAG6</color><color=#0000ff>="G" </color><color=#ff0000>CONNECTIONSTAG7</color><color=#0000ff>="F" </color><color=#ff0000>EXEMPTTAG</color><color=#0000ff>="X" </color><color=#ff0000>JRNYINCLUDESLOC</color><color=#0000ff>="MIA" </color><color=#ff0000>JRNYINCLUDESLOCTYPE</color><color=#0000ff>="C" </color><color=#ff0000>NATION</color><color=#0000ff>="US" </color><color=#ff0000>PERCENTFLATTAG</color><color=#0000ff>="F" </color><color=#ff0000>SEQNO</color><color=#0000ff>="187" </color><color=#ff0000>TAXAMT</color><color=#0000ff>="31" </color><color=#ff0000>TAXCODE</color><color=#0000ff>="AA" </color><color=#ff0000>TAXPOINTLOC1</color><color=#0000ff>="IAH" </color><color=#ff0000>TAXPOINTLOC1STOPOVERTAG</color><color=#0000ff>="S" </color><color=#ff0000>TAXPOINTLOC1TYPE</color><color=#0000ff>="C" </color><color=#ff0000>TAXPOINTLOC2</color><color=#0000ff>="LGA" </color><color=#ff0000>TAXPOINTLOC2TYPE</color><color=#0000ff>="P" </color><color=#ff0000>TAXPOINTTAG</color><color=#0000ff>="D" </color><color=#ff0000>TAXTYPE</color><color=#0000ff>="001" </color><color=#ff0000>TICKETEDPOINTTAG</color><color=#0000ff>="U" </color><color=#ff0000>TRAVELDATEAPPTAG</color><color=#0000ff>="T" </color><color=#ff0000>TVLFIRSTDAY</color><color=#0000ff>="01" </color><color=#ff0000>TVLFIRSTMONTH</color><color=#0000ff>="08" </color><color=#ff0000>TVLFIRSTYEAR</color><color=#0000ff>="13" </color><color=#ff0000>TVLLASTDAY</color><color=#0000ff>="01" </color><color=#ff0000>TVLLASTMONTH</color><color=#0000ff>="01" </color><color=#ff0000>TVLLASTYEAR</color><color=#0000ff>="14" </color><color=#ff0000>VENDOR</color><color=#0000ff>="ATPCO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="MIA" </color><color=#ff0000>Index</color><color=#0000ff>="0" </color><color=#ff0000>LocCode</color><color=#0000ff>="MIA" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="DFW" </color><color=#ff0000>Index</color><color=#0000ff>="1" </color><color=#ff0000>LocCode</color><color=#0000ff>="DFW" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="IAH" </color><color=#ff0000>Index</color><color=#0000ff>="2" </color><color=#ff0000>LocCode</color><color=#0000ff>="IAH" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="NYC" </color><color=#ff0000>Index</color><color=#0000ff>="3" </color><color=#ff0000>LocCode</color><color=#0000ff>="LGA" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="IAD" </color><color=#ff0000>Index</color><color=#0000ff>="4" </color><color=#ff0000>LocCode</color><color=#0000ff>="IAD" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Mileage<br>
        <color=#ff0000>GeoPathIndex</color><color=#0000ff>="0"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="100" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="100" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="1200" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="1200" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="4" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="300" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="5" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="300" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="6" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="400" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="7" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Mileage><br>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="MIA" </color><color=#ff0000>LocType</color><color=#0000ff>="C" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="IAH" </color><color=#ff0000>LocType</color><color=#0000ff>="C" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="LGA" </color><color=#ff0000>LocType</color><color=#0000ff>="P" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        </Cache><br>
        </TaxRq><br>
        Coredump
Example after:
        <TaxRq><br>
        <PointOfSale<br>
        <color=#ff0000>PointOfSaleLoc</color><color=#0000ff>="DAL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <ProcessingOptions<br>
        <color=#ff0000>TicketingDate</color><color=#0000ff>="2013-08-21" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <GeoPath><br>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="MIA" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="DFW" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="DFW" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="IAH" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#ff0000>UnticketedTransfer</color><color=#0000ff>="Y" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="IAH" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#ff0000>UnticketedTransfer</color><color=#0000ff>="Y" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="LGA" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="LGA" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="IAD" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </GeoPath><br>
        <FarePath><br>
        <FareUsage<br>
        <color=#ff0000>Index</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </FarePath><br>
        <GeoPathMapping><br>
        <Mapping><br>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="4" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="5" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="6" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="7" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Mapping><br>
        </GeoPathMapping><br>
        <Fare<br>
        <color=#ff0000>Amount</color><color=#0000ff>="100" </color><color=#ff0000>BasisCode</color><color=#0000ff>="X2RE" </color><color=#ff0000>Directionality</color><color=#0000ff>="O" </color><color=#ff0000>OneWayRoundTrip</color><color=#0000ff>="O" </color><color=#ff0000>TypeCode</color><color=#0000ff>="EU" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="AA" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="AA" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="DL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="DL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Itin<br>
        <color=#ff0000>FarePathGeoPathMappingIndex</color><color=#0000ff>="0" </color><color=#ff0000>FarePathIndex</color><color=#0000ff>="0" </color><color=#ff0000>GeoPathIndex</color><color=#0000ff>="0" </color><color=#ff0000>Id</color><color=#0000ff>="0" </color><color=#ff0000>TravelOriginDate</color><color=#0000ff>="2013-09-20"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="0" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="1" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="1" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="1" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Itin><br>
        <Cache><br>
        <RulesRecord<br>
        <color=#ff0000>CONNECTIONSTAG1</color><color=#0000ff>="H" </color><color=#ff0000>CONNECTIONSTAG2</color><color=#0000ff>="I" </color><color=#ff0000>CONNECTIONSTAG3</color><color=#0000ff>="C" </color><color=#ff0000>CONNECTIONSTAG4</color><color=#0000ff>="D" </color><color=#ff0000>CONNECTIONSTAG5</color><color=#0000ff>="E" </color><color=#ff0000>CONNECTIONSTAG6</color><color=#0000ff>="G" </color><color=#ff0000>CONNECTIONSTAG7</color><color=#0000ff>="F" </color><color=#ff0000>EXEMPTTAG</color><color=#0000ff>="X" </color><color=#ff0000>JRNYINCLUDESLOC</color><color=#0000ff>="MIA" </color><color=#ff0000>JRNYINCLUDESLOCTYPE</color><color=#0000ff>="C" </color><color=#ff0000>NATION</color><color=#0000ff>="US" </color><color=#ff0000>PERCENTFLATTAG</color><color=#0000ff>="F" </color><color=#ff0000>SEQNO</color><color=#0000ff>="187" </color><color=#ff0000>TAXAMT</color><color=#0000ff>="31" </color><color=#ff0000>TAXCODE</color><color=#0000ff>="AA" </color><color=#ff0000>TAXPOINTLOC1</color><color=#0000ff>="IAH" </color><color=#ff0000>TAXPOINTLOC1STOPOVERTAG</color><color=#0000ff>="S" </color><color=#ff0000>TAXPOINTLOC1TYPE</color><color=#0000ff>="C" </color><color=#ff0000>TAXPOINTLOC2</color><color=#0000ff>="LGA" </color><color=#ff0000>TAXPOINTLOC2TYPE</color><color=#0000ff>="P" </color><color=#ff0000>TAXPOINTTAG</color><color=#0000ff>="D" </color><color=#ff0000>TAXTYPE</color><color=#0000ff>="001" </color><color=#ff0000>TICKETEDPOINTTAG</color><color=#0000ff>="U" </color><color=#ff0000>TRAVELDATEAPPTAG</color><color=#0000ff>="T" </color><color=#ff0000>TVLFIRSTDAY</color><color=#0000ff>="01" </color><color=#ff0000>TVLFIRSTMONTH</color><color=#0000ff>="08" </color><color=#ff0000>TVLFIRSTYEAR</color><color=#0000ff>="13" </color><color=#ff0000>TVLLASTDAY</color><color=#0000ff>="01" </color><color=#ff0000>TVLLASTMONTH</color><color=#0000ff>="01" </color><color=#ff0000>TVLLASTYEAR</color><color=#0000ff>="14" </color><color=#ff0000>VENDOR</color><color=#0000ff>="ATPCO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="MIA" </color><color=#ff0000>Index</color><color=#0000ff>="0" </color><color=#ff0000>LocCode</color><color=#0000ff>="MIA" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="DFW" </color><color=#ff0000>Index</color><color=#0000ff>="1" </color><color=#ff0000>LocCode</color><color=#0000ff>="DFW" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="IAH" </color><color=#ff0000>Index</color><color=#0000ff>="2" </color><color=#ff0000>LocCode</color><color=#0000ff>="IAH" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="NYC" </color><color=#ff0000>Index</color><color=#0000ff>="3" </color><color=#ff0000>LocCode</color><color=#0000ff>="LGA" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="IAD" </color><color=#ff0000>Index</color><color=#0000ff>="4" </color><color=#ff0000>LocCode</color><color=#0000ff>="IAD" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Mileage<br>
        <color=#ff0000>GeoPathIndex</color><color=#0000ff>="0"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="100" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="100" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="1200" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="1200" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="4" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="300" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="5" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="300" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="6" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Distance<br>
        <color=#ff0000>FromGeoIndex</color><color=#0000ff>="0" </color><color=#ff0000>Miles</color><color=#0000ff>="400" </color><color=#ff0000>ToGeoIndex</color><color=#0000ff>="7" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Mileage><br>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="MIA" </color><color=#ff0000>LocType</color><color=#0000ff>="C" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="IAH" </color><color=#ff0000>LocType</color><color=#0000ff>="C" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="LGA" </color><color=#ff0000>LocType</color><color=#0000ff>="P" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        </Cache><br>
        </TaxRq><br>
        <TaxRs>
        <Itins>
        <Itin
        <color=#ff0000>Id</color><color=#0000ff>="0"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <Tax<br>
        <color=#ff0000>Nation</color><color=#0000ff>="US" </color><color=#ff0000>TaxCode</color><color=#0000ff>="AA" </color><color=#ff0000>TaxType</color><color=#0000ff>="001" </color><color=#ff0000>TaxPointTag</color><color=#0000ff>="D" </color><color=#ff0000>PercentFlatTag</color><color=#0000ff>="F" </color><color=#ff0000>TotalAmt</color><color=#0000ff>="0"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <TaxDetail<br>
        <color=#ff0000>TaxAmt</color><color=#0000ff>="0" </color><color=#ff0000>SeqNo</color><color=#0000ff>="187" </color><color=#ff0000>TaxPointLoc1</color><color=#0000ff>="IAH" </color><color=#ff0000>TaxPointLoc1Index</color><color=#0000ff>="4" </color><color=#ff0000>TaxPointLoc2</color><color=#0000ff>="LGA" </color><color=#ff0000>TaxPointLoc2Index</color><color=#0000ff>="5" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Tax><br>
        </Itin><br>
        </Itins><br>
        </TaxRs><br>
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/Geo.h
Unit tests files:
        N/A
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: N/A
BA: 
QA: 

Title: TK-639819 DEV - US One Way Trip (AY) - coding and TK-639820 DEV - US Round Trip (AY) - coding
Date: 08/23/2013
Description:
        Tasks:
        TK-639819 DEV - US One Way Trip (AY) - coding and
        TK-639820 DEV - US Round Trip (AY) - coding
        From story:
        S-333809 Tax Application Limit processing ( US One Way Trip /Tax Code AY /, US Round Trip /Tax Code AY/)
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/UsOneWayAndRoundTripTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/GeoUtils.h
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [X] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: S-316219 Tax Application Limit processing /Ininerary, continuous journey /nation CA/ , single journey/nation AU/ 
Date: 08/23/2013
Description:
        S-316219 Tax Application Limit processing /Ininerary, continuous journey /nation CA/ , single journey/nation AU/
        TK-638843 QA - Tax Application Limit - continuous journey (CA)
         TK-639644 DEV - Unit tests - Continuous Journey
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/BrApplTicketedPointTag.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/ConnectionsTagsApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/ContinuousJourneyTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/FillFareBreaksApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/FillGeoPropertiesApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/FillTimeStopoversApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/JourneyGeoSpecJourneyIncludesApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/JourneyGeoSpecLoc1AsOriginApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/JourneyGeoSpecTravelWhollyWithinApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoIntlDomLoc1IndApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc1ApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc1TransferTypeApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc2ApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointLoc2CompareTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointLoc3AsNextStopoverApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesProcessor.cpp 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/CJLimitApplicator.cpp 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/CJLimitApplicator.h 
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/CJLimitRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/CJLimitRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        /vobs/atseintl/Taxes/AtpcoTaxes/test/PaymentDetailMock.cpp
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/test/CJlimitTest.cpp.invalid
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [X] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Badarycz
Code reviewers: n/a
BA: 
QA: Dawid Buszko

Title: Unit tests refactoring
Date: 08/23/2013
Description:
        Fixing ExemptTagApplicatorTest
        Fixing ReturnAndNotReturnToOriginApplicatorTest
        Creating GeoPathMock
        Deleting invalid and unmanagable tests.
        Moving assertion_failed.cpp to Common
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Interfaces/Io/GeoPath.h
        Rules
        Common
Unit tests files:
        test/GeoPathMock.cpp
        Rules/test
        Rules/test/data
        Rules/test/ReturnAndNotReturnToOriginApplicatorTest.cpp
        Rules/test/ExemptTagApplicatorTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: Unit tests for diagnostics
Date: 08/26/2013
Description:
        Extended RequestDiagnostic unit test.
         Fixed DBDiagnostic.h to contain parameters reference instead of value.
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Diagnostic/DBDiagnostic.h
        Diagnostic/DBDiagnostic.cpp
Unit tests files:
        Diagnostic/test/RequestDiagnosticTest.cpp
        Diagnostic/test/DBDiagnosticTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Mateusz Drewienkowski
Code reviewers: .
BA: 
QA: 

Title: TK-639797 DEV - Unit Tests
Date: 08/27/2013
Description:
        Task: TK-639797 DEV - Unit Tests
        from story: S-333809 Tax Application Limit processing ( US One Way Trip /Tax Code AY /, US Round Trip /Tax Code
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        "/vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripApplicator.h"
        "/vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripApplicator.cpp"
Unit tests files:
        "/vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/UsOneWayAndRoundTripTest.cpp"
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: TK-643088 DEV - Parse TaxableUnitTag in the XML request
Date: 08/28/2013
Description:
        Task: TK-643088 DEV - Parse TaxableUnitTag in the XML request
        from story: S-317487 Apply the tax percent on YQ/YR and validate Taxable Unit Tag for Itinerary and YQ/YR
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Common/SafeEnumDefs.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/Itin.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/Request.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlParser.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/Types.h
        /vobs/atseintl/Taxes/AtpcoTaxes/LegacyFacades/Types.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Common/SafeEnums.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/YqYrPath.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/YqYrPath.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/YqYrUsage.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/YqYrUsage.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/YqYr.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/YqYr.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: S-332689 ATPCO business logic changes on Tax Point Geo fields
Date: 08/29/2013
Description:
        29.08 12:00 - TK-642996: ValidateTax Point Loc 1 Domestic/International Indicator
         29.08 16:00 - TK-642994: Validate Tax Point loc 1 Stopover Tag
         30.08 10:40 - TK-642992: Validate Tax Point Loc 2 Comparision
         30.08 16:40 - TK-642999: Connections Tag Validation
        2.09 17:00 - TK-642991: Continuous Journey Logic - Return to origin Field (byte 72)
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        TK-642996: ValidateTax Point Loc 1 Domestic/International Indicator
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointGeoIntlDomLoc1IndApplicator.cpp@@/main/atsev2_Integration/15
         TK-642994: Validate Tax Point loc 1 Stopover Tag
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/Loc1StopoverTagApplicator.cpp@@/main/atsev2_Integration/3
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/Loc1StopoverTagApplicator.h@@/main/atsev2_Integration/3
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/Loc1StopoverTagRule.cpp@@/main/atsev2_Integration/4
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/Loc1StopoverTagRule.h@@/main/atsev2_Integration/4
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp@@/main/atsev2_Integration/47
         TK-642992: Validate Tax Point Loc 2 Comparision
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointLoc2CompareApplicator.cpp@@/main/atsev2_Integration/10
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointLoc2CompareRule.cpp@@/main/atsev2_Integration/5
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxPointLoc2CompareRule.h@@/main/atsev2_Integration/4
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp@@/main/atsev2_Integration/48
         TK-642999: Connections Tag Validation
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ConnectionsTagsApplicator.cpp@@/main/atsev2_Integration/41
        TK-642991: Continuous Journey Logic - Return to origin Field (byte 72)
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyApplicator.cpp@@/main/atsev2_Integration/10
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyApplicator.h@@/main/atsev2_Integration/5
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyLimitApplicator.cpp@@/main/atsev2_Integration/9
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyLimitApplicator.h@@/main/atsev2_Integration/7
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/OnePerItinLimitApplicator.cpp@@/main/atsev2_Integration/4
Unit tests files:
        TK-642994: Validate Tax Point loc 1 Stopover Tag
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/Loc1StopoverTagApplicatorTest.cpp@@/main/atsev2_Integration/3
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/RulesTest.cpp@@/main/atsev2_Integration/7
         TK-642992: Validate Tax Point Loc 2 Comparision
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxPointLoc2CompareTest.cpp@@/main/atsev2_Integration/6
         TK-642999: Connections Tag Validation
         /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/ConnectionsTagsApplicatorTest.cpp@@/main/atsev2_Integration/18
         /vobs/atseintl/Taxes/AtpcoTaxes/test/MileageCacheMock.cpp@@/main/atsev2_Integration/3
         /vobs/atseintl/Taxes/AtpcoTaxes/test/MileageCacheMock.h@@/main/atsev2_Integration/6
        TK-642991: Continuous Journey Logic - Return to origin Field (byte 72)
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/data/continuous.xml@@/main/atsev2_Integration/4
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/ContinuousJourneyTest.cpp@@/main/atsev2_Integration/10
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Aleksander Hryniewiecki
Code reviewers: .
BA: 
QA: 

Title: ATPCO-50,51,53
Date: 08/29/2013
Description:
        ATPCO-50,51,53 fixed and awaiting for QA tests
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
        N/A
Entry/XML to recreate:
Example before:
        N/A
Example after:
        N/A
Files updated:
        -r--r--r-- 1 atse_cm pricing 3245 Aug 29 06:28 ContinuousJourneyLimitApplicator.cpp
        -r--r--r-- 1 atse_cm pricing 1627 Aug 28 09:01 ContinuousJourneyLimitApplicator.h
        -r--r--r-- 1 atse_cm pricing 2261 Aug 28 11:06 OnePerItinLimitApplicator.cpp
        -r--r--r-- 1 atse_cm pricing 1425 Aug 28 09:33 OnePerItinLimitApplicator.h
        -r--r--r-- 1 atse_cm pricing 3192 Aug 29 06:45 SingleJourneyLimitApplicator.cpp
        -r--r--r-- 1 atse_cm pricing 1625 Aug 29 03:48 SingleJourneyLimitApplicator.h
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: Maciek Krawczyk
BA: 
QA: Dawid

Title: ATPCO-49   Incorrect Loc1 processing when tax is not applied 
Date: 08/30/2013
Description:
        BusinessRulesProcessor fixed.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        <TaxRq>
         <PointOfSale PointOfSaleLoc="DAL" />
         <ProcessingOptions TicketingDate="2013-08-30" />
         <GeoPath>
         <Geo Loc="DFW" Type="D" />
         <Geo Loc="JFK" Type="A" />
         <Geo Loc="JFK" Type="D" />
         <Geo Loc="MIA" Type="A" />
         <Geo Loc="MIA" Type="D" />
         <Geo Loc="LAX" Type="A" />
         <Geo Loc="LAX" Type="D" />
         <Geo Loc="PHX" Type="A" />
         <Geo Loc="PHX" Type="D" />
         <Geo Loc="SFO" Type="A" />
         </GeoPath>
         <FarePath>
         <FareUsage Index="0" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         <Map Index="2" />
         <Map Index="3" />
         <Map Index="4" />
         <Map Index="5" />
         <Map Index="6" />
         <Map Index="7" />
         <Map Index="8" />
         <Map Index="9" />
         </Mapping>
         </GeoPathMapping>
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1210" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1211" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1212" />
         <Flight ArrivalDateShift="0" ArrivalTime="22:00" DepartureTime="18:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1213" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1214" />
         <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-09-25">
         <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="3" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="4" />
         </Itin>
         <TestData>
         <RulesRecord CARRIERFLTITEMNO1="0" CARRIERFLTITEMNO2="6512" NATION="US" PERCENTFLATTAG="F" SEQNO="103" TAXAMT="21" TAXCODE="AA" TAXPOINTLOC2STOPOVERTAG="S" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP" />
         <Loc LocCode="JFK" NationCode="US" />
         <Loc LocCode="DAL" NationCode="US" />
         <Loc LocCode="SFO" NationCode="US" />
         <Loc LocCode="LAX" NationCode="US" />
         <Loc LocCode="DFW" NationCode="US" />
         <Loc LocCode="PHX" NationCode="US" />
         <Loc LocCode="MIA" NationCode="US" />
         <CarrierFlt ITEMNO="6512" VENDOR="ATP">
         <CarrierFltSeg FLT1="1211" FLT2=" " MARKETINGCARRIER="AA" OPERATINGCARRIER=" " />
         </CarrierFlt>
         </TestData>
        </TaxRq><br>
        no taxes in response
Example after:
        <TaxRq>
         <PointOfSale PointOfSaleLoc="DAL" />
         <ProcessingOptions TicketingDate="2013-08-30" />
         <GeoPath>
         <Geo Loc="DFW" Type="D" />
         <Geo Loc="JFK" Type="A" />
         <Geo Loc="JFK" Type="D" />
         <Geo Loc="MIA" Type="A" />
         <Geo Loc="MIA" Type="D" />
         <Geo Loc="LAX" Type="A" />
         <Geo Loc="LAX" Type="D" />
         <Geo Loc="PHX" Type="A" />
         <Geo Loc="PHX" Type="D" />
         <Geo Loc="SFO" Type="A" />
         </GeoPath>
         <FarePath>
         <FareUsage Index="0" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         <Map Index="2" />
         <Map Index="3" />
         <Map Index="4" />
         <Map Index="5" />
         <Map Index="6" />
         <Map Index="7" />
         <Map Index="8" />
         <Map Index="9" />
         </Mapping>
         </GeoPathMapping>
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1210" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1211" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1212" />
         <Flight ArrivalDateShift="0" ArrivalTime="22:00" DepartureTime="18:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1213" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" MarketingCarrierFlightNumber="1214" />
         <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-09-25">
         <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="3" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="4" />
         </Itin>
         <TestData>
         <RulesRecord CARRIERFLTITEMNO1="0" CARRIERFLTITEMNO2="6512" NATION="US" PERCENTFLATTAG="F" SEQNO="103" TAXAMT="21" TAXCODE="AA" TAXPOINTLOC2STOPOVERTAG="S" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP" />
         <Loc LocCode="JFK" NationCode="US" />
         <Loc LocCode="DAL" NationCode="US" />
         <Loc LocCode="SFO" NationCode="US" />
         <Loc LocCode="LAX" NationCode="US" />
         <Loc LocCode="DFW" NationCode="US" />
         <Loc LocCode="PHX" NationCode="US" />
         <Loc LocCode="MIA" NationCode="US" />
         <CarrierFlt ITEMNO="6512" VENDOR="ATP">
         <CarrierFltSeg FLT1="1211" FLT2=" " MARKETINGCARRIER="AA" OPERATINGCARRIER=" " />
         </CarrierFlt>
         </TestData>
        </TaxRq><br>
        <TaxRs>
         <Itins>
         <Itin Id="0">
         <Tax Nation="US" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="21">
         <TaxDetail TaxAmt="21" SeqNo="103" TaxPointLoc1="JFK" TaxPointLoc1Index="2" TaxPointLoc2="LAX" TaxPointLoc2Index="5" />
         </Tax>
         </Itin>
         </Itins>
        </TaxRs>
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesProcessor.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: AtpcoTaxes
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: Maciek Krawczyk
BA: 
QA: Bartosz Kwiecien

Title: Refactoring
Date: 08/30/2013
Description:
        Refactoring of tasks:
        TK-643092 DEV - Tax percent on YQ/YR   coding,
        TK-639819 DEV - US One Way Trip (AY),
        TK-639820 DEV - US Round Trip (AY) - coding
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripApplicator.cpp
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/UsOneWayAndRoundTripTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: Two classes name changed
Date: 08/30/2013
Description:
        UsOneWayAndRoundTripRule -> UsOneWayAndRoundTripLimitRule
        UsOneWayAndRoundTripApplicator -> UsOneWayAndRoundTripLimitApplicator
Applies to: 
        [ ] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/UsOneWayAndRoundTripLimitTest.cpp<br>
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: S-333813 Tax Application Limit processing /conflicting information for tax limitation/
Date: 09/05/2013
Description:
        Tasks:
        TK-643194 Itinerary and blank conflicts
        TK-643195 CJ conflicts
        TK-643197 SJ conflicts
        TK-643198 US R/S J conflicts
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [X] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/UsOneWayAndRoundTripLimitTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyLimitApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/OnePerItinLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/SingleJourneyLimitApplicator.cpp
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/OnePerItinLimitApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/ContinuousJourneyLimitApplicatorTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: [ATPCO] S-334553 Validate Expire Date field
Date: 09/06/2013
Description:
        Development has been finished. Two new attributes have been added to XML:
        1) RulesRecord has a new (old, really, but never used) optional attribute, EXPIREDATE, of type Timestamp ("2013-09-06 13:21"); it defaults to +infinity if not specified;
        2) ProcessingOptions has a new required attribute, TicketingTime, of type Time ("13:22").
        Also, Time and Date types have been refactored into a single file pair (Timestamp.h/.cpp), including also a new Timestamp type.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
        <TaxRq><PointOfSale PointOfSaleLoc="DAL" /><ProcessingOptions TicketingDate="2013-08-20" TicketingTime="11:00" /><GeoPath><Geo Loc="KRK" Type="D" /><Geo Loc="WAW" Type="A" /><Geo Loc="WAW" Type="D" /><Geo Loc="FRA" Type="A" /><Geo Loc="FRA" Type="D" /><Geo Loc="DFW" Type="A" /></GeoPath><FarePath><FareUsage Index="0" /></FarePath><GeoPathMapping><Mapping><Map Index="0" /><Map Index="1" /><Map Index="2" /><Map Index="3" /><Map Index="4" /><Map Index="5" /></Mapping></GeoPathMapping><Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" /><Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" /><Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH" /><Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH" /><Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-10-06"><FlightUsage ConnectionDateShift="0" FlightIndex="0" /><FlightUsage ConnectionDateShift="1" FlightIndex="1" /><FlightUsage ConnectionDateShift="1" FlightIndex="2" /></Itin><TestData><RulesRecord EXPIREDATE="2099-12-31 11:59" NATION="DE" PERCENTFLATTAG="F" SEQNO="10000" TAXABLEUNITTAG9="X" TAXAMT="120" TAXCODE="AA" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP" /><RulesRecord EXPIREDATE="2013-08-20 11:00" NATION="DE" PERCENTFLATTAG="F" SEQNO="10001" TAXABLEUNITTAG9="X" TAXAMT="120" TAXCODE="AB" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP" /><RulesRecord EXPIREDATE="2013-08-20 10:59" NATION="DE" PERCENTFLATTAG="F" SEQNO="10002" TAXABLEUNITTAG9="X" TAXAMT="220" TAXCODE="XA" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP" /><RulesRecord EXPIREDATE="2013-08-19 12:00" NATION="DE" PERCENTFLATTAG="F" SEQNO="10003" TAXABLEUNITTAG9="X" TAXAMT="220" TAXCODE="XB" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP" /><Loc LocCode="KRK" NationCode="PL" /><Loc LocCode="DAL" NationCode="US" /><Loc LocCode="WAW" NationCode="PL" /><Loc LocCode="DFW" NationCode="US" /><Loc LocCode="FRA" NationCode="DE" /></TestData></TaxRq><br>
Example before:
        haven't captured, sorry...
Example after:
        <TaxRs><Itins><Itin Id="0"><Tax Nation="DE" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="120"><TaxDetail TaxAmt="120" SeqNo="10000" TaxPointLoc1="FRA" TaxPointLoc1Index="4" TaxPointLoc2="DFW" TaxPointLoc2Index="5"></TaxDetail></Tax><Tax Nation="DE" TaxCode="AB" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="120"><TaxDetail TaxAmt="120" SeqNo="10001" TaxPointLoc1="FRA" TaxPointLoc1Index="4" TaxPointLoc2="DFW" TaxPointLoc2Index="5"></TaxDetail></Tax></Itin></Itins></TaxRs><br>
Files updated:
        Too many to list here...
        Time.h and Date.h were merged into Timestamp.h, the same with ....cpp and ...Test.cpp.
        Include commands have been changed accordingly.
Unit tests files:
        TimeTest.cpp, DateTest.cpp => Timestamp.cpp
        Also, some unit tests required update as the output format was changed.
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [X] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [X] Yes
Developer: Piotr Sulecki
Code reviewers: Jacek Stania
BA: 
QA: Tomasz Lurka

Title: JIRY
Date: 09/10/2013
Description:
        D-104023 [Tax Application Limit] Incorrect application of tax with TAXAPPLIMIT="1" on US One Way Trip,
        D-104065 For US ROUND TRIP tax application limit with value 1 is not processed correctly
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/OnePerItinLimitApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/OnePerItinLimitApplicator.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: ATPCO-58
Date: 09/10/2013
Description:
        BlankLimitApplicator added.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        N/A
Example after:
        <TaxRq>
        <PointOfSale
        <color=#ff0000>PointOfSaleLoc</color><color=#0000ff>="DAL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <ProcessingOptions<br>
        <color=#ff0000>TicketingDate</color><color=#0000ff>="2013-09-06" </color><color=#ff0000>TicketingTime</color><color=#0000ff>="11:00" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <GeoPath><br>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="WAW" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="KRK" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="KRK" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="GDN" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="GDN" </color><color=#ff0000>Type</color><color=#0000ff>="D" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Geo<br>
        <color=#ff0000>Loc</color><color=#0000ff>="POZ" </color><color=#ff0000>Type</color><color=#0000ff>="A" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </GeoPath><br>
        <FarePath><br>
        <FareUsage<br>
        <color=#ff0000>Index</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </FarePath><br>
        <GeoPathMapping><br>
        <Mapping><br>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="4" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Map<br>
        <color=#ff0000>Index</color><color=#0000ff>="5" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Mapping><br>
        </GeoPathMapping><br>
        <Fare<br>
        <color=#ff0000>Amount</color><color=#0000ff>="100" </color><color=#ff0000>BasisCode</color><color=#0000ff>="X2RE" </color><color=#ff0000>Directionality</color><color=#0000ff>="O" </color><color=#ff0000>OneWayRoundTrip</color><color=#0000ff>="O" </color><color=#ff0000>TypeCode</color><color=#0000ff>="EU" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="LO" </color><color=#ff0000>OperatingCarrier</color><color=#0000ff>="LO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="LO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Flight<br>
        <color=#ff0000>ArrivalDateShift</color><color=#0000ff>="0" </color><color=#ff0000>ArrivalTime</color><color=#0000ff>="16:00" </color><color=#ff0000>DepartureTime</color><color=#0000ff>="12:00" </color><color=#ff0000>MarketingCarrier</color><color=#0000ff>="LO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Itin<br>
        <color=#ff0000>FarePathGeoPathMappingIndex</color><color=#0000ff>="0" </color><color=#ff0000>FarePathIndex</color><color=#0000ff>="0" </color><color=#ff0000>GeoPathIndex</color><color=#0000ff>="0" </color><color=#ff0000>Id</color><color=#0000ff>="0" </color><color=#ff0000>TravelOriginDate</color><color=#0000ff>="2013-10-06"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="0" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="0" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="1" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <FlightUsage<br>
        <color=#ff0000>ConnectionDateShift</color><color=#0000ff>="1" </color><color=#ff0000>FlightIndex</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Itin><br>
        <TestData><br>
        <RulesRecord<br>
        <color=#ff0000>NATION</color><color=#0000ff>="PL" </color><color=#ff0000>PERCENTFLATTAG</color><color=#0000ff>="F" </color><color=#ff0000>SEQNO</color><color=#0000ff>="101" </color><color=#ff0000>TAXABLEUNITTAG9</color><color=#0000ff>="X" </color><color=#ff0000>TAXAMT</color><color=#0000ff>="20" </color><color=#ff0000>TAXAPPLIMIT</color><color=#0000ff>="1" </color><color=#ff0000>TAXCODE</color><color=#0000ff>="AA" </color><color=#ff0000>TAXPOINTLOC1</color><color=#0000ff>="1" </color><color=#ff0000>TAXPOINTLOC1TYPE</color><color=#0000ff>="M" </color><color=#ff0000>TAXPOINTTAG</color><color=#0000ff>="D" </color><color=#ff0000>TAXTYPE</color><color=#0000ff>="001" </color><color=#ff0000>VENDOR</color><color=#0000ff>="ATPCO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <RulesRecord<br>
        <color=#ff0000>NATION</color><color=#0000ff>="PL" </color><color=#ff0000>PERCENTFLATTAG</color><color=#0000ff>="F" </color><color=#ff0000>SEQNO</color><color=#0000ff>="102" </color><color=#ff0000>TAXABLEUNITTAG9</color><color=#0000ff>="X" </color><color=#ff0000>TAXAMT</color><color=#0000ff>="40" </color><color=#ff0000>TAXAPPLIMIT</color><color=#0000ff>=" " </color><color=#ff0000>TAXCODE</color><color=#0000ff>="AA" </color><color=#ff0000>TAXPOINTLOC1</color><color=#0000ff>="2" </color><color=#ff0000>TAXPOINTLOC1TYPE</color><color=#0000ff>="M" </color><color=#ff0000>TAXPOINTTAG</color><color=#0000ff>="D" </color><color=#ff0000>TAXTYPE</color><color=#0000ff>="001" </color><color=#ff0000>VENDOR</color><color=#0000ff>="ATPCO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <RulesRecord<br>
        <color=#ff0000>NATION</color><color=#0000ff>="PL" </color><color=#ff0000>PERCENTFLATTAG</color><color=#0000ff>="F" </color><color=#ff0000>SEQNO</color><color=#0000ff>="103" </color><color=#ff0000>TAXABLEUNITTAG9</color><color=#0000ff>="X" </color><color=#ff0000>TAXAMT</color><color=#0000ff>="15" </color><color=#ff0000>TAXAPPLIMIT</color><color=#0000ff>="1" </color><color=#ff0000>TAXCODE</color><color=#0000ff>="AA" </color><color=#ff0000>TAXPOINTLOC1</color><color=#0000ff>="3" </color><color=#ff0000>TAXPOINTLOC1TYPE</color><color=#0000ff>="M" </color><color=#ff0000>TAXPOINTTAG</color><color=#0000ff>="D" </color><color=#ff0000>TAXTYPE</color><color=#0000ff>="001" </color><color=#ff0000>VENDOR</color><color=#0000ff>="ATPCO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <RulesRecord<br>
        <color=#ff0000>NATION</color><color=#0000ff>="PL" </color><color=#ff0000>PERCENTFLATTAG</color><color=#0000ff>="F" </color><color=#ff0000>SEQNO</color><color=#0000ff>="104" </color><color=#ff0000>TAXABLEUNITTAG9</color><color=#0000ff>="X" </color><color=#ff0000>TAXAMT</color><color=#0000ff>="10" </color><color=#ff0000>TAXAPPLIMIT</color><color=#0000ff>=" " </color><color=#ff0000>TAXCODE</color><color=#0000ff>="AA" </color><color=#ff0000>TAXPOINTLOC1</color><color=#0000ff>="1" </color><color=#ff0000>TAXPOINTLOC1TYPE</color><color=#0000ff>="M" </color><color=#ff0000>TAXPOINTTAG</color><color=#0000ff>="D" </color><color=#ff0000>TAXTYPE</color><color=#0000ff>="001" </color><color=#ff0000>VENDOR</color><color=#0000ff>="ATPCO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <RulesRecord<br>
        <color=#ff0000>NATION</color><color=#0000ff>="PL" </color><color=#ff0000>PERCENTFLATTAG</color><color=#0000ff>="F" </color><color=#ff0000>SEQNO</color><color=#0000ff>="105" </color><color=#ff0000>TAXABLEUNITTAG9</color><color=#0000ff>="X" </color><color=#ff0000>TAXAMT</color><color=#0000ff>="25" </color><color=#ff0000>TAXAPPLIMIT</color><color=#0000ff>=" " </color><color=#ff0000>TAXCODE</color><color=#0000ff>="AA" </color><color=#ff0000>TAXPOINTLOC1</color><color=#0000ff>="2" </color><color=#ff0000>TAXPOINTLOC1TYPE</color><color=#0000ff>="M" </color><color=#ff0000>TAXPOINTTAG</color><color=#0000ff>="D" </color><color=#ff0000>TAXTYPE</color><color=#0000ff>="001" </color><color=#ff0000>VENDOR</color><color=#0000ff>="ATPCO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <RulesRecord<br>
        <color=#ff0000>NATION</color><color=#0000ff>="PL" </color><color=#ff0000>PERCENTFLATTAG</color><color=#0000ff>="F" </color><color=#ff0000>SEQNO</color><color=#0000ff>="106" </color><color=#ff0000>TAXABLEUNITTAG9</color><color=#0000ff>="X" </color><color=#ff0000>TAXAMT</color><color=#0000ff>="30" </color><color=#ff0000>TAXAPPLIMIT</color><color=#0000ff>=" " </color><color=#ff0000>TAXCODE</color><color=#0000ff>="AA" </color><color=#ff0000>TAXPOINTLOC1</color><color=#0000ff>="3" </color><color=#ff0000>TAXPOINTLOC1TYPE</color><color=#0000ff>="M" </color><color=#ff0000>TAXPOINTTAG</color><color=#0000ff>="D" </color><color=#ff0000>TAXTYPE</color><color=#0000ff>="001" </color><color=#ff0000>VENDOR</color><color=#0000ff>="ATPCO" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="DAL" </color><color=#ff0000>LocCode</color><color=#0000ff>="DAL" </color><color=#ff0000>NationCode</color><color=#0000ff>="US" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="WAW" </color><color=#ff0000>LocCode</color><color=#0000ff>="WAW" </color><color=#ff0000>NationCode</color><color=#0000ff>="PL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="KRK" </color><color=#ff0000>LocCode</color><color=#0000ff>="KRK" </color><color=#ff0000>NationCode</color><color=#0000ff>="PL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="GDN" </color><color=#ff0000>LocCode</color><color=#0000ff>="GDN" </color><color=#ff0000>NationCode</color><color=#0000ff>="PL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <Loc<br>
        <color=#ff0000>CityCode</color><color=#0000ff>="POZ" </color><color=#ff0000>LocCode</color><color=#0000ff>="POZ" </color><color=#ff0000>NationCode</color><color=#0000ff>="PL" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="1" </color><color=#ff0000>LocType</color><color=#0000ff>="M" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="1" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="2" </color><color=#ff0000>LocType</color><color=#0000ff>="M" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="2" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        <IsInLoc<br>
        <color=#ff0000>LocCode</color><color=#0000ff>="3" </color><color=#ff0000>LocType</color><color=#0000ff>="M" </color><color=#ff0000>Vendor</color><color=#0000ff>="ATPCO"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        <LocUsage<br>
        <color=#ff0000>LocId</color><color=#0000ff>="4" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </IsInLoc><br>
        </TestData><br>
        </TaxRq><br>
        <TaxRs><br>
        <Itins><br>
        <Itin<br>
        <color=#ff0000>Id</color><color=#0000ff>="0"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <Tax<br>
        <color=#ff0000>Nation</color><color=#0000ff>="PL" </color><color=#ff0000>TaxCode</color><color=#0000ff>="AA" </color><color=#ff0000>TaxType</color><color=#0000ff>="001" </color><color=#ff0000>TaxPointTag</color><color=#0000ff>="D" </color><color=#ff0000>PercentFlatTag</color><color=#0000ff>="F" </color><color=#ff0000>TotalAmt</color><color=#0000ff>="40"</color><color=#8b008b></color>
        <color=#8b008b>></color>
        <TaxDetail<br>
        <color=#ff0000>TaxAmt</color><color=#0000ff>="40" </color><color=#ff0000>SeqNo</color><color=#0000ff>="102" </color><color=#ff0000>TaxPointLoc1</color><color=#0000ff>="KRK" </color><color=#ff0000>TaxPointLoc1Index</color><color=#0000ff>="2" </color><color=#ff0000>TaxPointLoc2</color><color=#0000ff>="GDN" </color><color=#ff0000>TaxPointLoc2Index</color><color=#0000ff>="3" </color><color=#8b008b></color>
        <color=#8b008b>/></color>
        </Tax><br>
        </Itin><br>
        </Itins><br>
        </TaxRs><br>
Files updated:
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: Patrycja Chowaniec
BA: 
QA: 

Title: Refactoring
Date: 09/10/2013
Description:
        New class SpecialTrips created.
        Commonly used methods: findOneWayTrips, findRoundTrips, findContinuousJourneys, isGeoInTrip where moved to this class.
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ContinuousJourneyLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/OnePerItinLimitApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/OnePerItinLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/SpecialTrips.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/SpecialTrips.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: TK-646511 Code Rules Controller
Date: 09/12/2013
Description:
        Mechanism for turn of selected business rules is added.
        List of available business rules can be displayed by new diagnostic 801/BR.
        New element in ProcessingOptions:
        <ProcessingOptions >
          <ExemptedRule Id="27" />
          <ExemptedRule Id="28" />
        </ProcessingOptions>
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        <TaxRq>
         <PointOfSale PointOfSaleLoc="DAL" />
         <ProcessingOptions TicketingDate="2013-09-11" TicketingTime="11:00">
         </ProcessingOptions>
         <GeoPath>
         <Geo Loc="KRK" Type="D" />
         <Geo Loc="WAW" Type="A" />
         <Geo Loc="WAW" Type="D" />
         <Geo Loc="FRA" Type="A" />
         <Geo Loc="FRA" Type="D" />
         <Geo Loc="BER" Type="A" />
         <Geo Loc="BER" Type="D" />
         <Geo Loc="KRK" Type="A" />
         </GeoPath>
         <FarePath >
         <FareUsage Index="0" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         <Map Index="2" />
         <Map Index="3" />
         <Map Index="4" />
         <Map Index="5" />
         <Map Index="6" />
         <Map Index="7" />
         </Mapping>
         </GeoPathMapping>
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <Flight ArrivalDateShift="0" ArrivalTime="17:00" DepartureTime="12:30" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="20:00" DepartureTime="17:01" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="23:00" DepartureTime="12:01" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="14:30" DepartureTime="11:00" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2014-06-09">
         <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="3" />
         </Itin>
         <GeoPath>
         <Geo Loc="WAW" Type="D" />
         <Geo Loc="DFW" Type="A" />
         <Geo Loc="DFW" Type="D" />
         <Geo Loc="LGA" Type="A" />
         <Geo Loc="LGA" Type="D" />
         <Geo Loc="PHX" Type="A" />
         </GeoPath>
         <FarePath>
         <FareUsage Index="1" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         <Map Index="2" />
         <Map Index="3" />
         <Map Index="4" />
         <Map Index="5" />
         </Mapping>
         </GeoPathMapping>
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <Flight ArrivalDateShift="0" ArrivalTime="17:00" DepartureTime="12:30" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="20:00" DepartureTime="17:01" MarketingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="23:00" DepartureTime="02:01" MarketingCarrier="AA" />
         <Itin FarePathGeoPathMappingIndex="1" FarePathIndex="1" GeoPathIndex="1" Id="1" TravelOriginDate="2014-06-09">
         <FlightUsage ConnectionDateShift="0" FlightIndex="4" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="5" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="6" />
         </Itin>
         <TestData>
         <RulesRecord NATION="PL" PERCENTFLATTAG="F" SEQNO="101" TAXABLEUNITTAG9="X" TAXAMT="11" TAXCODE="AA" TAXPOINTLOC1STOPOVERTAG="S" TAXPOINTLOC2STOPOVERTAG="S" TAXPOINTTAG="D" TAXTYPE="001" />
         <Loc LocCode="KRK" NationCode="PL" />
         <Loc LocCode="DAL" NationCode="US" />
         <Loc LocCode="WAW" NationCode="PL" />
         <Loc LocCode="DFW" NationCode="US" />
         <Loc LocCode="BER" NationCode="DE" />
         <Loc LocCode="PHX" NationCode="US" />
         <Loc LocCode="FRA" NationCode="DE" />
         <Loc LocCode="LGA" NationCode="US" />
         </TestData>
        </TaxRq><br>
        <TaxRs>
         <Itins>
         <Itin Id="0">
         <Tax Nation="PL" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="22">
         <TaxDetail TaxAmt="11" SeqNo="101" TaxPointLoc1="KRK" TaxPointLoc1Index="0" TaxPointLoc2="WAW" TaxPointLoc2Index="1" />
         <TaxDetail TaxAmt="11" SeqNo="101" TaxPointLoc1="WAW" TaxPointLoc1Index="2" TaxPointLoc2="KRK" TaxPointLoc2Index="7" />
         </Tax>
         </Itin>
         <Itin Id="1">
         <Tax Nation="PL" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="11">
         <TaxDetail TaxAmt="11" SeqNo="101" TaxPointLoc1="WAW" TaxPointLoc1Index="0" TaxPointLoc2="DFW" TaxPointLoc2Index="1" />
         </Tax>
         </Itin>
         </Itins>
        </TaxRs>
Example after:
        <TaxRq>
         <PointOfSale PointOfSaleLoc="DAL" />
         <ProcessingOptions TicketingDate="2013-09-11" TicketingTime="11:00">
         <ExemptedRule Id="27" />
         </ProcessingOptions>
         <GeoPath>
         <Geo Loc="KRK" Type="D" />
         <Geo Loc="WAW" Type="A" />
         <Geo Loc="WAW" Type="D" />
         <Geo Loc="FRA" Type="A" />
         <Geo Loc="FRA" Type="D" />
         <Geo Loc="BER" Type="A" />
         <Geo Loc="BER" Type="D" />
         <Geo Loc="KRK" Type="A" />
         </GeoPath>
         <FarePath >
         <FareUsage Index="0" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         <Map Index="2" />
         <Map Index="3" />
         <Map Index="4" />
         <Map Index="5" />
         <Map Index="6" />
         <Map Index="7" />
         </Mapping>
         </GeoPathMapping>
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <Flight ArrivalDateShift="0" ArrivalTime="17:00" DepartureTime="12:30" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="20:00" DepartureTime="17:01" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="23:00" DepartureTime="12:01" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="14:30" DepartureTime="11:00" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2014-06-09">
         <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="3" />
         </Itin>
         <GeoPath>
         <Geo Loc="WAW" Type="D" />
         <Geo Loc="DFW" Type="A" />
         <Geo Loc="DFW" Type="D" />
         <Geo Loc="LGA" Type="A" />
         <Geo Loc="LGA" Type="D" />
         <Geo Loc="PHX" Type="A" />
         </GeoPath>
         <FarePath>
         <FareUsage Index="1" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         <Map Index="2" />
         <Map Index="3" />
         <Map Index="4" />
         <Map Index="5" />
         </Mapping>
         </GeoPathMapping>
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <Flight ArrivalDateShift="0" ArrivalTime="17:00" DepartureTime="12:30" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="20:00" DepartureTime="17:01" MarketingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="23:00" DepartureTime="02:01" MarketingCarrier="AA" />
         <Itin FarePathGeoPathMappingIndex="1" FarePathIndex="1" GeoPathIndex="1" Id="1" TravelOriginDate="2014-06-09">
         <FlightUsage ConnectionDateShift="0" FlightIndex="4" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="5" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="6" />
         </Itin>
         <TestData>
         <RulesRecord NATION="PL" PERCENTFLATTAG="F" SEQNO="101" TAXABLEUNITTAG9="X" TAXAMT="11" TAXCODE="AA" TAXPOINTLOC1STOPOVERTAG="S" TAXPOINTLOC2STOPOVERTAG="S" TAXPOINTTAG="D" TAXTYPE="001" />
         <Loc LocCode="KRK" NationCode="PL" />
         <Loc LocCode="DAL" NationCode="US" />
         <Loc LocCode="WAW" NationCode="PL" />
         <Loc LocCode="DFW" NationCode="US" />
         <Loc LocCode="BER" NationCode="DE" />
         <Loc LocCode="PHX" NationCode="US" />
         <Loc LocCode="FRA" NationCode="DE" />
         <Loc LocCode="LGA" NationCode="US" />
         </TestData>
        </TaxRq><br>
        <TaxRs>
         <Itins>
         <Itin Id="0">
         <Tax Nation="PL" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="0">
         <TaxDetail TaxAmt="0" SeqNo="101" TaxPointLoc1="KRK" TaxPointLoc1Index="0" TaxPointLoc2="WAW" TaxPointLoc2Index="1" />
         <TaxDetail TaxAmt="0" SeqNo="101" TaxPointLoc1="WAW" TaxPointLoc1Index="2" TaxPointLoc2="KRK" TaxPointLoc2Index="7" />
         </Tax>
         </Itin>
         <Itin Id="1">
         <Tax Nation="PL" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="0">
         <TaxDetail TaxAmt="0" SeqNo="101" TaxPointLoc1="WAW" TaxPointLoc1Index="0" TaxPointLoc2="DFW" TaxPointLoc2Index="1" />
         </Tax>
         </Itin>
         </Itins>
        </TaxRs><br>
        <TaxRq>
        <Diagnostic Id="801">
        <Parameter Name="BR"></Parameter></Diagnostic>
        </TaxRq><br>
        <TaxRs>
         <Diagnostic>
         <Message Content="************************************************************" />
         <Message Content=" ---- DIAGNOSTIC 801 - DB DATA ---- " />
         <Message Content="************************************************************" />
         <Message Content="-------------------- BUSINESS RULES LIST -------------------" />
         <Message Content="RULE ID RULE NAME " />
         <Message Content="" />
         <Message Content="1 CURRENCYOFSALERULE " />
         <Message Content="2 POINTOFTICKETINGRULE " />
         <Message Content="3 SALEDATERULE " />
         <Message Content="4 INITPROPERTIESRULE " />
         <Message Content="5 FILLGEOPROPERTIESRULE " />
         <Message Content="6 FILLFAREBREAKSRULE " />
         <Message Content="7 FILLTIMESTOPOVERSRULE " />
         <Message Content="8 TICKETEDPOINTRULE " />
         <Message Content="9 CONNECTIONSTAGSRULE " />
         <Message Content="10 JOURNEYGEOSPECLOC1ASORIGINRULE " />
         <Message Content="11 JOURNEYGEOSPECLOC2DESTINATIONTURNAROUNDRULE" />
         <Message Content="12 JOURNEYGEOSPECTRAVELWHOLLYWITHINRULE " />
         <Message Content="13 JOURNEYGEOSPECJOURNEYINCLUDESRULE " />
         <Message Content="14 RETURNTOORIGINRULE " />
         <Message Content="15 CONTINUOUSJOURNEYRULE " />
         <Message Content="16 TAXPOINTGEOLOC1RULE " />
         <Message Content="17 TAXPOINTGEOLOC1TRANSFERTYPERULE " />
         <Message Content="18 LOC1STOPOVERTAGRULE " />
         <Message Content="19 TAXPOINTGEOINTLDOMLOC1INDRULE " />
         <Message Content="20 TAXPOINTGEOLOC2RULE " />
         <Message Content="21 TAXPOINTLOC2COMPARERULE " />
         <Message Content="22 TAXPOINTGEOINTLDOMLOC2INDRULE " />
         <Message Content="23 TAXPOINTLOC3 " />
         <Message Content="24 TRAVELDATESRULE " />
         <Message Content="25 VALIDATINGCARRIERRULE " />
         <Message Content="26 CARRIERFLIGHTRULE " />
         <Message Content="27 FLATTAXRULE " />
         <Message Content="28 PERCENTAGETAXRULE " />
         <Message Content="29 LIMITAPPLICATIONRULE " />
         <Message Content="30 EXEMPTTAGRULE " />
         <Message Content="------------------------------------------------------------" />
         <Message Content="" />
         </Diagnostic>
        </TaxRs>
Files updated:
        BusinessRulesControler, BrApplicatorApplicator, GroupId
Unit tests files:
        BusinessRulesContainerTest
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: N/A
BA: 
QA: 

Title: First issue in JIRA ATPCO-61 and TK-646484 DEV - Parse fields: MinTax, MaxTax, MinMaxCurrency in the XML request
Date: 09/12/2013
Description:
        First issue in JIRA ATPCO-61 and TK-646484 DEV - Parse fields: MinTax, MaxTax, MinMaxCurrency in the XML request
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlParser.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/PercentageTaxTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/OnePerItinLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/SingleJourneyLimitApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/SingleJourneyLimitApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/SpecialTrips.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/SpecialTrips.cpp<br>
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: Taski: TK-646485 DEV- Apply the Minimum when Tax Percent, TK-646486 DEV- Apply the Maximum when Tax Percent
Date: 09/16/2013
Description:
        Taski: TK-646485 DEV- Apply the Minimum when Tax Percent, TK-646486 DEV- Apply the Maximum when Tax Percent
        z historyjki: S-309675 Apply the Minimum/Maximum Tax when Tax Percent
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/PercentageTaxTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/SpecialTrips.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxMinMaxValueApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxMinMaxValueApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxMinMaxValueRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxMinMaxValueRule.h
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: Fix: parsing of minMaxDecimals added
Date: 09/16/2013
Description:
        Fix: parsing of minMaxDecimals added
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlParser.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: S-309673 Apply Tax Amount in currency of sale for flat tax
Date: 09/16/2013
Description:
        TK-646562
        DEV - Convert Tax Amount in FlatTaxApplicator<br>
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
        N/A
Entry/XML to recreate:
        <TaxRq>
          <PointOfSale PointOfSaleLoc="DAL" />
          <ProcessingOptions TicketingDate="2013-09-16" TicketingTime="11:00" />
          <TicketingOptions FormOfPayment="M" <bgcolor=yellow>PaymentCurrency="USD"</bgcolor> />
          <GeoPath>
            <Geo Loc="KRK" Type="D" />
            <Geo Loc="WAW" Type="A" />
            <Geo Loc="WAW" Type="D" />
            <Geo Loc="KTW" Type="A" />
            <Geo Loc="KTW" Type="D" />
            <Geo Loc="FRA" Type="A" />
            <Geo Loc="FRA" Type="D" />
            <Geo Loc="DFW" Type="A" />
          </GeoPath>
          <Fare />
          <Fare />
          <Fare />
          <Fare />
          <FarePath>
            <FareUsage Index="0" />
          </FarePath>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0" />
              <Map Index="1" />
              <Map Index="2" />
              <Map Index="3" />
              <Map Index="4" />
              <Map Index="5" />
              <Map Index="6" />
              <Map Index="7" />
            </Mapping>
          </GeoPathMapping>
          <Fare Amount="22" BasisCode="ZZX32P" Directionality="3" OneWayRoundTrip="O" TypeCode="YRT" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" OperatingCarrier="LH" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH" />
          <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-10-16">
            <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="3" />
          </Itin>
          <TestData>
            <RulesRecord <bgcolor=yellow>CURRENCYOFSALE="USD</bgcolor>" NATION="PL" <bgcolor=yellow>PERCENTFLATTAG="F"</bgcolor> SEQNO="100" TAXABLEUNITTAG9="X" TAXAMT="7" TAXCODE="PL" TAXPOINTTAG="D" TAXTYPE="001" />
            <RulesRecord <bgcolor=yellow>CURRENCYOFSALE="USD"</bgcolor> NATION="US" <bgcolor=yellow>PERCENTFLATTAG="F"</bgcolor> SEQNO="200" TAXABLEUNITTAG9="X" TAXAMT="13" TAXCODE="US" TAXPOINTTAG="A" TAXTYPE="001" />
            <Loc LocCode="KRK" NationCode="PL" />
            <Loc LocCode="WAW" NationCode="PL" />
            <Loc LocCode="KTW" NationCode="PL" />
            <Loc LocCode="DFW" NationCode="US" />
        <bgcolor=yellow>    <CurrencyConversion FromCurrency="EUR" ToCurrency="USD" BSR="1.11" /></bgcolor>
        <bgcolor=yellow>    <CurrencyConversion FromCurrency="USD" ToCurrency="EUR" BSR="2.22" /></bgcolor>
        <bgcolor=yellow>    <CurrencyConversion FromCurrency="EUR" ToCurrency="PLN" BSR="3.33" /></bgcolor>
        <bgcolor=yellow>    <CurrencyConversion FromCurrency="PLN" ToCurrency="EUR" BSR="4.44" /></bgcolor>
          </TestData>
        </TaxRq>
Example before:
        N/A
Example after:
        N/A
Files updated:
        Taxes/AtpcoTaxes/ServerFacades/CurrencyCacheImpl.cpp
        Taxes/AtpcoTaxes/ServerFacades/CurrencyCacheImpl.h
        Taxes/AtpcoTaxes/Rules/MathUtils.h
        Taxes/AtpcoTaxes/Server/Engine.cpp
        Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        Taxes/AtpcoTaxes/Rules/FlatTaxRule.cpp
        Taxes/AtpcoTaxes/Rules/FlatTaxRule.h
        Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.cpp
        Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.h
        Taxes/AtpcoTaxes/Interfaces/Services/CurrencyCache.cpp
        Taxes/AtpcoTaxes/Interfaces/Services/CurrencyCache.h
Unit tests files:
        Taxes/AtpcoTaxes/Rules/test/FlatTaxTest.cpp
        Taxes/AtpcoTaxes/Rules/test/RulesTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Maciej Krawczyk
Code reviewers: Piotr Lach
BA: 
QA: 

Title: Unit tests for story: S-309675 Apply the Minimum/Maximum Tax when Tax Percent
Date: 09/16/2013
Description:
        Unit tests for story: S-309675 Apply the Minimum/Maximum Tax when Tax Percent
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/test/PaymentDetailMock.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/test/PaymentDetailMock.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxMinMaxValueApplicator.cpp<br>
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/TaxMinMaxValueTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: JIRA: ATPCO-61- issue 2
Date: 09/16/2013
Description:
        JIRA: ATPCO-61- issue 2
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BlankLimitApplicator.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: TK-646506 Handle task related xml fields
Date: 09/16/2013
Description:
        Hadnling of RulesRecord fields:
        TKTVALAPPLQUALIFIER="A" TKTVALCURRENCY="USD" TKTVALMIN="1" TKTVALMAX="1000" TKTVALCURRDECIMALS="1"<br>
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        N/A
Example after:
        N/A
Files updated:
        XmlParser.cpp,
        Request.cpp, 
        TktMinMaxValueApplicator.cpp
        TktMinMaxValueApplicator.h
        TktMinMaxValueRule.cpp
        TktMinMaxValueRule.h
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: N/A
BA: 
QA: 

Title: S-309673 Apply Tax Amount in currency of sale for flat tax
Date: 09/16/2013
Description:
        TK-646561 DEV - Refactoring
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
        n/a
Entry/XML to recreate:
        n/a
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/Fare.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/Payment.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Diagnostic/PositiveDiagnostic.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/XmlWriter.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/Types.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/TaxMinMaxValueApplicator.cpp<br>
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/test/PaymentDetailMock.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/test/PaymentDetailMock.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Server/test/XmlParserTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/FlatTaxTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/PercentageTaxTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Maciej Krawczyk
Code reviewers: n/a
BA: 
QA: 

Title: S-309673 Apply Tax Amount in currency of sale for flat tax
Date: 09/17/2013
Description:
        Bugfix. Wrong conversion.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
        n/a
Entry/XML to recreate:
        n/a
Example before:
        n/a
Example after:
        n/a
Files updated:
        Rules/FlatTaxApplicator.cpp
Unit tests files:
        n/a
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Maciej Krawczyk
Code reviewers: .
BA: 
QA: 

Title: ATPCO-65  Wrong processing of TAXCURDECIMALS 
Date: 09/18/2013
Description:
        Decimals are applied 2 times.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        <TaxRq>
          <PointOfSale PointOfSaleLoc="DAL"/>
          <ProcessingOptions TicketingDate="2013-09-17" TicketingTime="11:00"/>
          <GeoPath>
            <Geo Loc="WAW" Type="D"/>
            <Geo Loc="GOT" Type="A"/>
            <Geo Loc="GOT" Type="D"/>
            <Geo Loc="LHR" Type="A"/>
            <Geo Loc="LHR" Type="D"/>
            <Geo Loc="FRA" Type="A"/>
          </GeoPath>
          <FarePath>
            <FareUsage Index="0"/>
          </FarePath>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0"/>
              <Map Index="1"/>
              <Map Index="2"/>
              <Map Index="3"/>
              <Map Index="4"/>
              <Map Index="5"/>
            </Mapping>
          </GeoPathMapping>
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO"/>
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="DY"/>
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH"/>
          <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-10-17">
            <FlightUsage ConnectionDateShift="0" FlightIndex="0"/>
            <FlightUsage ConnectionDateShift="1" FlightIndex="1"/>
            <FlightUsage ConnectionDateShift="1" FlightIndex="2"/>
          </Itin>
          <Fare Amount="100" BasisCode="AB2T" Directionality="I" OneWayRoundTrip="O" TypeCode="PSD"/>
          <TestData>
            <RulesRecord NATION="SE" PERCENTFLATTAG="F" SEQNO="12321" TAXABLEUNITTAG9="X" TAXAMT="12000" TAXCODE="AA" TAXCURDECIMALS="2" TAXPERCENT="0" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP"/>
            <Loc LocCode="DAL" NationCode="US"/>
            <Loc LocCode="LHR" NationCode="GB"/>
            <Loc LocCode="WAW" NationCode="PL"/>
            <Loc LocCode="GOT" NationCode="SE"/>
            <Loc LocCode="FRA" NationCode="DE"/>
          </TestData>
        </TaxRq><br>
        <TaxRs>
        <Itins>
        <Itin Id="0">
        <Tax Nation="SE" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="120">
        <TaxDetail TaxAmt="1.2" SeqNo="12321" TaxPointLoc1="GOT" TaxPointLoc1Index="2" TaxPointLoc2="LHR" TaxPointLoc2Index="3" TaxEquivAmt="120" TaxEquivCurr="USD" />
        </Tax>
        </Itin>
        </Itins>
        </TaxRs></pre>
Example after:
        <TaxRq>
          <PointOfSale PointOfSaleLoc="DAL"/>
          <ProcessingOptions TicketingDate="2013-09-17" TicketingTime="11:00"/>
          <GeoPath>
            <Geo Loc="WAW" Type="D"/>
            <Geo Loc="GOT" Type="A"/>
            <Geo Loc="GOT" Type="D"/>
            <Geo Loc="LHR" Type="A"/>
            <Geo Loc="LHR" Type="D"/>
            <Geo Loc="FRA" Type="A"/>
          </GeoPath>
          <FarePath>
            <FareUsage Index="0"/>
          </FarePath>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0"/>
              <Map Index="1"/>
              <Map Index="2"/>
              <Map Index="3"/>
              <Map Index="4"/>
              <Map Index="5"/>
            </Mapping>
          </GeoPathMapping>
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO"/>
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="DY"/>
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH"/>
          <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-10-17">
            <FlightUsage ConnectionDateShift="0" FlightIndex="0"/>
            <FlightUsage ConnectionDateShift="1" FlightIndex="1"/>
            <FlightUsage ConnectionDateShift="1" FlightIndex="2"/>
          </Itin>
          <Fare Amount="100" BasisCode="AB2T" Directionality="I" OneWayRoundTrip="O" TypeCode="PSD"/>
          <TestData>
            <RulesRecord NATION="SE" PERCENTFLATTAG="F" SEQNO="12321" TAXABLEUNITTAG9="X" TAXAMT="12000" TAXCODE="AA" TAXCURDECIMALS="2" TAXPERCENT="0" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP"/>
            <Loc LocCode="DAL" NationCode="US"/>
            <Loc LocCode="LHR" NationCode="GB"/>
            <Loc LocCode="WAW" NationCode="PL"/>
            <Loc LocCode="GOT" NationCode="SE"/>
            <Loc LocCode="FRA" NationCode="DE"/>
          </TestData>
        </TaxRq><br>
        </pre>
        <TaxRs>
         <Itins>
         <Itin Id="0">
         <Tax Nation="SE" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="120">
         <TaxDetail TaxAmt="120" SeqNo="12321" TaxPointLoc1="GOT" TaxPointLoc1Index="2" TaxPointLoc2="LHR" TaxPointLoc2Index="3" TaxEquivAmt="120" TaxEquivCurr="USD" />
         </Tax>
         </Itin>
         </Itins>
        </TaxRs>
Files updated:
        BusinessRulesContainer.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: Patrycja Chowaniec
BA: 
QA: 

Title: TK-646565 DEV-Refactoring
Date: 09/18/2013
Description:
        The way of calculating Fare Amount and YqYr Amount has been changed.
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.cpp
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/PercentageTaxTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: TK-646565 DEV-Refactoring
Date: 09/18/2013
Description:
        NotReturnToOriginApplicator and NotReturnToOriginRule functionality moved to: ReturnToOriginApplicator  ReturnToOriginRule
        File ReturnAndNotReturnToOriginApplicatorTest.cpp renamed to ReturnToOriginApplicatorTest.cpp
Applies to: 
        [ ] all agencies
        [ ] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: ATPCO TAXES
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ReturnToOriginApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ReturnToOriginApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ReturnToOriginRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/ReturnToOriginRule.h<br>
Unit tests files:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/ReturnToOriginApplicatorTest.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/test/RulesTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: ATPCO
Schema update: 
        [ ] Yes
Developer: Patrycja Chowaniec
Code reviewers: Piotr Lach
BA: 
QA: 

Title: S-309666Validation of Ticket Value Minimum/Maximum
Date: 09/18/2013
Description:
        Coded according to requirements.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        N/A
Example after:
        <TaxRq>
         <PointOfSale PointOfSaleLoc="DAL" />
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
        <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <ProcessingOptions TicketingDate="2013-09-11" TicketingTime="11:00" />
         <GeoPath>
         <Geo Loc="KRK" Type="D" />
         <Geo Loc="WAW" Type="A" />
         <Geo Loc="WAW" Type="D" />
         <Geo Loc="FRA" Type="A" />
         <Geo Loc="FRA" Type="D" />
         <Geo Loc="BER" Type="A" />
         <Geo Loc="BER" Type="D" />
         <Geo Loc="KRK" Type="A" />
         </GeoPath>
         <FarePath TotalAmount="110" >
         <FareUsage Index="0" />
         <FareUsage Index="1" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         </Mapping>
        <Mapping>
         <Map Index="2" />
         <Map Index="3" />
         <Map Index="4" />
         <Map Index="5" />
         <Map Index="6" />
         <Map Index="7" />
         </Mapping>
         </GeoPathMapping>
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <Flight ArrivalDateShift="0" ArrivalTime="17:00" DepartureTime="12:30" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="20:00" DepartureTime="17:01" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="23:00" DepartureTime="12:01" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="14:30" DepartureTime="11:00" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2014-06-09">
         <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="3" />
         </Itin>
         <GeoPath>
         <Geo Loc="WAW" Type="D" />
         <Geo Loc="DFW" Type="A" />
         <Geo Loc="DFW" Type="D" />
         <Geo Loc="LGA" Type="A" />
         <Geo Loc="LGA" Type="D" />
         <Geo Loc="PHX" Type="A" />
         </GeoPath>
         <FarePath TotalAmount="110" >
         <FareUsage Index="1" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         <Map Index="2" />
         <Map Index="3" />
         <Map Index="4" />
         <Map Index="5" />
         </Mapping>
         </GeoPathMapping>
         <Flight ArrivalDateShift="0" ArrivalTime="17:00" DepartureTime="12:30" MarketingCarrier="AA" OperatingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="20:00" DepartureTime="17:01" MarketingCarrier="AA" />
         <Flight ArrivalDateShift="0" ArrivalTime="23:00" DepartureTime="02:01" MarketingCarrier="AA" />
         <Itin FarePathGeoPathMappingIndex="1" FarePathIndex="1" GeoPathIndex="1" Id="1" TravelOriginDate="2014-06-09">
         <FlightUsage ConnectionDateShift="0" FlightIndex="4" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="5" />
         <FlightUsage ConnectionDateShift="1" FlightIndex="6" />
         </Itin>
         <TestData>
         <RulesRecord TAXAMT="11" TKTVALAPPLQUALIFIER="B" TKTVALCURRENCY="USD" TKTVALMIN="1100" TKTVALMAX="10000" TKTVALCURRDECIMALS="1" NATION="PL" PERCENTFLATTAG="F" SEQNO="101" TAXABLEUNITTAG9="X" TAXCODE="AA" TAXPOINTLOC1STOPOVERTAG="S" TAXPOINTLOC2STOPOVERTAG="S" TAXPOINTTAG="D" TAXTYPE="001" />
         <Loc LocCode="KRK" NationCode="PL" />
         <Loc LocCode="DAL" NationCode="US" />
         <Loc LocCode="WAW" NationCode="PL" />
         <Loc LocCode="DFW" NationCode="US" />
         <Loc LocCode="BER" NationCode="DE" />
         <Loc LocCode="PHX" NationCode="US" />
         <Loc LocCode="FRA" NationCode="DE" />
         <Loc LocCode="LGA" NationCode="US" />
         </TestData>
        </TaxRq><br>
        <TaxRs>
         <Itins>
         <Itin Id="0">
         <Tax Nation="PL" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="F" TotalAmt="22">
         <TaxDetail TaxAmt="11" SeqNo="101" TaxPointLoc1="KRK" TaxPointLoc1Index="0" TaxPointLoc2="WAW" TaxPointLoc2Index="1" TaxEquivAmt="11" TaxEquivCurr="USD" />
         <TaxDetail TaxAmt="11" SeqNo="101" TaxPointLoc1="WAW" TaxPointLoc1Index="2" TaxPointLoc2="KRK" TaxPointLoc2Index="7" TaxEquivAmt="11" TaxEquivCurr="USD" />
         </Tax>
         </Itin>
         <Itin Id="1" />
         </Itins>
        </TaxRs>
Files updated:
        TktMinMaxValueApplicator.cpp TktMinMaxValueApplicator.h TktMinMaxValueRule.cpp TktMinMaxValueRule.h
Unit tests files:
        tax::TktMinMaxValueTest::testApplyIfEmptyFareAndMinMaxRangeNotSet : OK
        tax::TktMinMaxValueTest::testApplyIfEmptyFareAndMinRangeNotSet : OK
        tax::TktMinMaxValueTest::testDontApplyIfFareIsNotInMinMaxRange : OK
        tax::TktMinMaxValueTest::testApplyIfFareIsInMinMaxRange : OK
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: N/A
BA: 
QA: 

Title:  ATPCO-66  Server crashes when PERCENTFLATTAG="P"
Date: 09/19/2013
Description:
        Request show below causes the server to crash. When PERCENTFLATTAG="F", server responds correctly.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        Coredump
Example after:
        <TaxRq>
         <PointOfSale PointOfSaleLoc="DAL" />
         <ProcessingOptions TicketingDate="2013-09-18" TicketingTime="11:00" />
         <GeoPath>
         <Geo Loc="DFW" Type="D" />
         <Geo Loc="JFK" Type="A" />
         </GeoPath>
         <FarePath>
         <FareUsage Index="0" />
         </FarePath>
         <GeoPathMapping>
         <Mapping>
         <Map Index="0" />
         <Map Index="1" />
         </Mapping>
         </GeoPathMapping>
         <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
         <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" />
         <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-10-18">
         <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
         </Itin>
         <TestData>
         <RulesRecord TAXAMT="12" NATION="US" PERCENTFLATTAG="P" SEQNO="20101" TAXABLEUNITTAG1="X" TAXABLEUNITTAG9="X" TAXCODE="AA" TAXPERCENT="50000" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP" />
         <Loc LocCode="JFK" NationCode="US" />
         <Loc LocCode="DAL" NationCode="US" />
         <Loc LocCode="DFW" NationCode="US" />
         </TestData>
         <YqYr Amount="100" />
         <YqYrPath>
         <YqYrUsage Index="0" />
         </YqYrPath>
        </TaxRq><br>
        <TaxRs>
         <Itins>
         <Itin Id="0">
         <Tax Nation="US" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="P" TotalAmt="0">
         <TaxDetail TaxAmt="0" SeqNo="20101" TaxPointLoc1="DFW" TaxPointLoc1Index="0" TaxPointLoc2="JFK" TaxPointLoc2Index="1" TaxEquivAmt="0" TaxEquivCurr="" />
         </Tax>
         </Itin>
         </Itins>
        </TaxRs>
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRule.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PercentageTaxRApplicator.h,cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Io/Itin.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: N/A
BA: 
QA: 

Title: [ATPCO Tax] S-309673 Apply Tax Amount in currency of sale for flat tax
Date: 09/20/2013
Description:
        TK-646563 DEV - Design
        TK-646564 DEV - Diagnostic with tax calculation info
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        n/a
Resolution/QA recommendation:
        n/a
Entry/XML to recreate:
        <TaxRq>
          <PointOfSale PointOfSaleLoc="DAL" />
          <ProcessingOptions TicketingDate="2013-09-16" TicketingTime="11:00" />
          <TicketingOptions FormOfPayment="M" PaymentCurrency="USD" />
          <GeoPath>
            <Geo Loc="KRK" Type="D" />
            <Geo Loc="WAW" Type="A" />
            <Geo Loc="WAW" Type="D" />
            <Geo Loc="KTW" Type="A" />
            <Geo Loc="KTW" Type="D" />
            <Geo Loc="FRA" Type="A" />
            <Geo Loc="FRA" Type="D" />
            <Geo Loc="DFW" Type="A" />
          </GeoPath>
          <Fare />
          <Fare />
          <Fare />
          <Fare />
          <FarePath>
            <FareUsage Index="0" />
          </FarePath>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0" />
              <Map Index="1" />
              <Map Index="2" />
              <Map Index="3" />
              <Map Index="4" />
              <Map Index="5" />
              <Map Index="6" />
              <Map Index="7" />
            </Mapping>
          </GeoPathMapping>
          <Fare Amount="22" BasisCode="ZZX32P" Directionality="3" OneWayRoundTrip="O" TypeCode="YRT" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" OperatingCarrier="LH" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LO" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="LH" />
          <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" TravelOriginDate="2013-10-16">
            <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="1" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="2" />
            <FlightUsage ConnectionDateShift="1" FlightIndex="3" />
          </Itin>
          <TestData>
            <RulesRecord CURRENCYOFSALE="USD" NATION="PL" PERCENTFLATTAG="F" SEQNO="100" TAXABLEUNITTAG9="X" TAXAMT="7" TAXCODE="PL" TAXPOINTTAG="D" TAXTYPE="001" />
            <RulesRecord CURRENCYOFSALE="USD" NATION="US" PERCENTFLATTAG="P" SEQNO="200" TAXABLEUNITTAG9="X" TAXAMT="13" TAXCODE="US" TAXPOINTTAG="A" TAXTYPE="001" />
            <Loc LocCode="KRK" NationCode="PL" />
            <Loc LocCode="WAW" NationCode="PL" />
            <Loc LocCode="KTW" NationCode="PL" />
            <Loc LocCode="DFW" NationCode="US" />
            <CurrencyConversion FromCurrency="EUR" ToCurrency="USD" BSR="1.11" />
            <CurrencyConversion FromCurrency="USD" ToCurrency="EUR" BSR="2.22" />
            <CurrencyConversion FromCurrency="EUR" ToCurrency="PLN" BSR="3.33" />
            <CurrencyConversion FromCurrency="PLN" ToCurrency="EUR" BSR="4.44" />
          </TestData><br>
          <Diagnostic Id="802">
            <Parameter Name="DC"/>
          </Diagnostic> <br>
        </TaxRq>
Example before:
        n/a
Example after:
        n/a
Files updated:
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Services/CurrencyCache.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Interfaces/Services/CurrencyCache.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        /vobs/atseintl/Taxes/AtpcoTaxes/Diagnostic/PositiveDiagnostic.cpp
        /vobs/atseintl/Taxes/AtpcoTaxes/Diagnostic/PositiveDiagnostic.h
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/CurrencyCacheImpl.h
        /vobs/atseintl/Taxes/AtpcoTaxes/ServerFacades/CurrencyCacheImpl.cpp
Unit tests files:
        n/a
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [X] WP
        [X] WPNC
        [X] WPA
        [X] Shopping
        [X] Fare Display
        [X] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Maciej Krawczyk
Code reviewers: .
BA: 
QA: 

Title: S-326905 Create ATPCO Tax Request from Pricing Trx
Date: 09/24/2013
Description:
        Added converter from PricingTrx to ATPCO TaxRequest. Currently it's being run only when diag 800 is turned on and ATPCO taxes are activated.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Taxes/AtpcoTaxes/Common/LocZone.h
        Taxes/AtpcoTaxes/Common/SafeEnumToString.h
        Taxes/AtpcoTaxes/Common/Types.h
        Taxes/AtpcoTaxes/Diagnostic/DBDiagnostic.cpp
        Taxes/AtpcoTaxes/Diagnostic/DBDiagnostic.h
        Taxes/AtpcoTaxes/Diagnostic/NegativeDiagnostic.cpp
        Taxes/AtpcoTaxes/Diagnostic/PositiveDiagnostic.cpp
        Taxes/AtpcoTaxes/Diagnostic/RequestDiagnostic.cpp
        Taxes/AtpcoTaxes/Interfaces/Db/CarrierApplication.h
        Taxes/AtpcoTaxes/Interfaces/Db/CarrierFlight.h
        Taxes/AtpcoTaxes/Interfaces/Db/CarrierFlightSegment.h
        Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        Taxes/AtpcoTaxes/Interfaces/Io/Fare.cpp
        Taxes/AtpcoTaxes/Interfaces/Io/Fare.h
        Taxes/AtpcoTaxes/Interfaces/Io/FareUsage.h
        Taxes/AtpcoTaxes/Interfaces/Io/Flight.h
        Taxes/AtpcoTaxes/Interfaces/Io/GeoPath.h
        Taxes/AtpcoTaxes/Interfaces/Io/Itin.h
        Taxes/AtpcoTaxes/Interfaces/Io/PointOfSale.h
        Taxes/AtpcoTaxes/Interfaces/Io/Request.cpp
        Taxes/AtpcoTaxes/Interfaces/Io/Request.h
        Taxes/AtpcoTaxes/Interfaces/Io/XmlCache.h
        Taxes/AtpcoTaxes/Interfaces/Io/YqYr.h
        Taxes/AtpcoTaxes/Interfaces/Io/YqYrUsage.h
        Taxes/AtpcoTaxes/Interfaces/Services/CarrierApplicationCache.h
        Taxes/AtpcoTaxes/Interfaces/Services/CarrierFlightCache.h
        Taxes/AtpcoTaxes/Interfaces/Services/CurrencyCache.h
        Taxes/AtpcoTaxes/Interfaces/Services/LocCache.cpp
        Taxes/AtpcoTaxes/Interfaces/Services/LocCache.h
        Taxes/AtpcoTaxes/Interfaces/Services/MileageCache.cpp
        Taxes/AtpcoTaxes/Interfaces/Services/MileageCache.h
        Taxes/AtpcoTaxes/Interfaces/Services/RulesRecordsCache.h
        Taxes/AtpcoTaxes/Rules/BasePathUtils.h
        Taxes/AtpcoTaxes/Rules/BlankLimitApplicator.h
        Taxes/AtpcoTaxes/Rules/BlankLimitRule.h
        Taxes/AtpcoTaxes/Rules/BrApplicatorsContainer.h
        Taxes/AtpcoTaxes/Rules/BusinessRule.h
        Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.h
        Taxes/AtpcoTaxes/Rules/CarrierFlightApplicator.h
        Taxes/AtpcoTaxes/Rules/CarrierFlightRule.h
        Taxes/AtpcoTaxes/Rules/ConnectionsTagsApplicator.h
        Taxes/AtpcoTaxes/Rules/ConnectionsTagsRule.h
        Taxes/AtpcoTaxes/Rules/ContinuousJourneyApplicator.h
        Taxes/AtpcoTaxes/Rules/ContinuousJourneyLimitApplicator.h
        Taxes/AtpcoTaxes/Rules/ContinuousJourneyLimitRule.h
        Taxes/AtpcoTaxes/Rules/ContinuousJourneyRule.h
        Taxes/AtpcoTaxes/Rules/CurrencyOfSaleApplicator.h
        Taxes/AtpcoTaxes/Rules/CurrencyOfSaleRule.h
        Taxes/AtpcoTaxes/Rules/ExemptTagRule.h
        Taxes/AtpcoTaxes/Rules/FillFareBreaksApplicator.h
        Taxes/AtpcoTaxes/Rules/FillFareBreaksRule.h
        Taxes/AtpcoTaxes/Rules/FillGeoPropertiesApplicator.h
        Taxes/AtpcoTaxes/Rules/FillGeoPropertiesRule.h
        Taxes/AtpcoTaxes/Rules/FillTimeStopoversApplicator.h
        Taxes/AtpcoTaxes/Rules/FillTimeStopoversRule.h
        Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.h
        Taxes/AtpcoTaxes/Rules/FlatTaxRule.h
        Taxes/AtpcoTaxes/Rules/FlightUsage.h
        Taxes/AtpcoTaxes/Rules/GeoUtils.h
        Taxes/AtpcoTaxes/Rules/InitPropertiesApplicator.h
        Taxes/AtpcoTaxes/Rules/InitPropertiesRule.h
        Taxes/AtpcoTaxes/Rules/ItinPayments.h
        Taxes/AtpcoTaxes/Rules/JourneyGeoSpecJourneyIncludesApplicator.h
        Taxes/AtpcoTaxes/Rules/JourneyGeoSpecJourneyIncludesRule.h
        Taxes/AtpcoTaxes/Rules/JourneyGeoSpecLoc1AsOriginApplicator.h
        Taxes/AtpcoTaxes/Rules/JourneyGeoSpecLoc1AsOriginRule.h
        Taxes/AtpcoTaxes/Rules/JourneyGeoSpecLoc2DestinationTurnAroundApplicator.h
        Taxes/AtpcoTaxes/Rules/JourneyGeoSpecLoc2DestinationTurnAroundRule.h
        Taxes/AtpcoTaxes/Rules/JourneyGeoSpecTravelWhollyWithinApplicator.h
        Taxes/AtpcoTaxes/Rules/JourneyGeoSpecTravelWhollyWithinRule.h
        Taxes/AtpcoTaxes/Rules/Loc.h
        Taxes/AtpcoTaxes/Rules/Loc1StopoverTagApplicator.h
        Taxes/AtpcoTaxes/Rules/Loc1StopoverTagRule.h
        Taxes/AtpcoTaxes/Rules/Map.h
        Taxes/AtpcoTaxes/Rules/MathUtils.h
        Taxes/AtpcoTaxes/Rules/NotReturnToOriginRule.h
        Taxes/AtpcoTaxes/Rules/OnePerItinLimitApplicator.h
        Taxes/AtpcoTaxes/Rules/OnePerItinLimitRule.h
        Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.cpp
        Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.h
        Taxes/AtpcoTaxes/Rules/PercentageTaxRule.h
        Taxes/AtpcoTaxes/Rules/PointOfTicketingApplicator.h
        Taxes/AtpcoTaxes/Rules/PointOfTicketingRule.h
        Taxes/AtpcoTaxes/Rules/ReturnToOriginApplicator.h
        Taxes/AtpcoTaxes/Rules/ReturnToOriginRule.h
        Taxes/AtpcoTaxes/Rules/SaleDateRule.h
        Taxes/AtpcoTaxes/Rules/SingleJourneyLimitApplicator.h
        Taxes/AtpcoTaxes/Rules/SingleJourneyLimitRule.h
        Taxes/AtpcoTaxes/Rules/SpecialTrips.h
        Taxes/AtpcoTaxes/Rules/TaxMinMaxValueApplicator.cpp
        Taxes/AtpcoTaxes/Rules/TaxMinMaxValueApplicator.h
        Taxes/AtpcoTaxes/Rules/TaxMinMaxValueRule.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoIntlDomLoc1IndApplicator.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoIntlDomLoc1IndRule.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoIntlDomLoc2IndApplicator.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoIntlDomLoc2IndRule.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc1Applicator.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc1Rule.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc1TransferTypeApplicator.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc1TransferTypeRule.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Applicator.h
        Taxes/AtpcoTaxes/Rules/TaxPointGeoLoc2Rule.h
        Taxes/AtpcoTaxes/Rules/TaxPointLoc2CompareApplicator.h
        Taxes/AtpcoTaxes/Rules/TaxPointLoc2CompareRule.h
        Taxes/AtpcoTaxes/Rules/TaxPointLoc3AsNextStopoverApplicator.h
        Taxes/AtpcoTaxes/Rules/TaxPointLoc3AsPreviousPointApplicator.h
        Taxes/AtpcoTaxes/Rules/TaxPointUtils.h
        Taxes/AtpcoTaxes/Rules/TicketedPointRule.h
        Taxes/AtpcoTaxes/Rules/TktMinMaxValueApplicator.h
        Taxes/AtpcoTaxes/Rules/TktMinMaxValueRule.h
        Taxes/AtpcoTaxes/Rules/TravelDatesRule.h
        Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitApplicator.h
        Taxes/AtpcoTaxes/Rules/UsOneWayAndRoundTripLimitRule.h
        Taxes/AtpcoTaxes/Rules/ValidatingCarrierApplicator.h
        Taxes/AtpcoTaxes/Rules/ValidatingCarrierRule.h
        Taxes/AtpcoTaxes/ServerFacades/CarrierApplicationCacheImpl.h
        Taxes/AtpcoTaxes/ServerFacades/CarrierFlightCacheImpl.h
        Taxes/AtpcoTaxes/ServerFacades/CurrencyCacheImpl.h
        Taxes/AtpcoTaxes/ServerFacades/CurrencyConversion.h
        Taxes/AtpcoTaxes/ServerFacades/Distance.h
        Taxes/AtpcoTaxes/ServerFacades/IsInLoc.h
        Taxes/AtpcoTaxes/ServerFacades/LocCacheImpl.cpp
        Taxes/AtpcoTaxes/ServerFacades/LocCacheImpl.h
        Taxes/AtpcoTaxes/ServerFacades/Mileage.h
        Taxes/AtpcoTaxes/ServerFacades/MileageCacheImpl.cpp
        Taxes/AtpcoTaxes/ServerFacades/MileageCacheImpl.h
        Taxes/AtpcoTaxes/ServerFacades/Nation.h
        Taxes/AtpcoTaxes/ServerFacades/RulesRecordsCacheImpl.h
        Taxes/AtpcoTaxes/ServerFacades/Types.h
        Taxes/LegacyFacades/AtpcoTaxOrchestrator.cpp
        Taxes/LegacyFacades/CurrencyCacheImpl.cpp
        Taxes/LegacyFacades/CurrencyCacheImpl.h
        Taxes/LegacyFacades/LocCacheImpl.h
        Taxes/LegacyFacades/TaxRequestBuilder.cpp
        Taxes/LegacyFacades/TaxRequestBuilder.h
        Taxes/LegacyFacades/Types.h
        Taxes/LegacyFacades/test/TaxRequestBuilderTest.cpp
        Taxes/Makefile
        Taxes/TestServer/FromString.h
        Taxes/libtaxes.mk
        test/Makefile_testTargets
Unit tests files:
        Taxes/AtpcoTaxes/Rules/test/BlankLimitApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/BrApplTicketedPointTagTest.cpp
        Taxes/AtpcoTaxes/Rules/test/CarrierFlightApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/ConnectionsTagsApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/ContinuousJourneyLimitApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/ContinuousJourneyTest.cpp
        Taxes/AtpcoTaxes/Rules/test/CurrencyOfSaleApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/FillFareBreaksApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/FillGeoPropertiesApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/FillTimeStopoversApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/JourneyGeoSpecJourneyIncludesApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/JourneyGeoSpecLoc1AsOriginApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/JourneyGeoSpecTravelWhollyWithinApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/OnePerItinLimitApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/PercentageTaxTest.cpp
        Taxes/AtpcoTaxes/Rules/test/PointOfTicketingTest.cpp
        Taxes/AtpcoTaxes/Rules/test/RequestAnalyzerTest.cpp
        Taxes/AtpcoTaxes/Rules/test/ReturnToOriginApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/SingleJourneyLimitApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TaxMinMaxValueTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TaxPointGeoIntlDomLoc1IndApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc1ApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc1TransferTypeApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TaxPointGeoLoc2ApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TaxPointLoc2CompareTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TaxPointLoc3AsNextStopoverApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TktMinMaxValueApplicatorTest.cpp
        Taxes/AtpcoTaxes/Rules/test/UsOneWayAndRoundTripLimitTest.cpp
        Taxes/AtpcoTaxes/Rules/test/ValidatingCarrierApplicatorTest.cpp
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Aleksander Hryniewiecki
Code reviewers: .
BA: 
QA: 

Title: Remove Phyton temp files from ClearCase
Date: 10/02/2013
Description:
        N/A
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        N/A
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        N/A
Example after:
        N/A
Files updated:
        Removed "nsiqcppstyle_checker.pyc".
        Removed "nsiqcppstyle_exe.pyc".
        Removed "nsiqcppstyle_lexer.pyc".
        Removed "nsiqcppstyle_reporter.pyc".
        Removed "nsiqcppstyle_rulehelper.pyc".
        Removed "nsiqcppstyle_rulemanager.pyc".
        Removed "nsiqcppstyle_state.pyc".
        Removed "nsiqcppstyle_util.pyc".
        Removed "__init__.pyc".
        Removed "RULE_10_1_A_do_not_use_bufferoverflow_risky_function_for_unix.pyc".
        Removed "RULE_10_1_B_do_not_use_bufferoverflow_risky_function_for_windows.pyc".
        Removed "RULE_3_1_A_do_not_start_filename_with_underbar.pyc".
        Removed "RULE_3_2_B_do_not_use_same_filename_more_than_once.pyc".
        Removed "RULE_3_2_CD_do_not_use_special_characters_in_filename.pyc".
        Removed "RULE_3_2_F_use_representitive_classname_for_cpp_filename.pyc".
        Removed "RULE_3_2_H_do_not_use_underbars_for_cpp_filename.pyc".
        Removed "RULE_3_2_H_do_not_use_uppercase_for_c_filename.pyc".
        Removed "RULE_3_3_A_start_function_name_with_is_or_has_when_return_bool.pyc".
        Removed "RULE_3_3_A_start_function_name_with_lowercase_unix.pyc".
        Removed "RULE_3_3_A_start_function_name_with_upperrcase_windows.pyc".
        Removed "RULE_3_3_B_start_private_function_name_with_underbar.pyc".
        Removed "RULE_4_1_A_A_use_tab_for_indentation.pyc".
        Removed "RULE_4_1_A_B_use_space_for_indentation.pyc".
        Removed "RULE_4_1_B_indent_each_enum_item_in_enum_block.pyc".
        Removed "RULE_4_1_B_locate_each_enum_item_in_seperate_line.pyc".
        Removed "RULE_4_1_C_align_long_function_parameter_list.pyc".
        Removed "RULE_4_1_E_align_conditions.pyc".
        Removed "RULE_4_2_A_A_space_around_operator.pyc".
        Removed "RULE_4_2_A_B_space_around_word.pyc".
        Removed "RULE_4_4_A_do_not_write_over_120_columns_per_line.pyc".
        Removed "RULE_4_4_B_do_not_write_over_100_columns_per_line.pyc".
        Removed "RULE_4_5_A_brace_for_namespace_should_be_located_in_seperate_line.pyc".
        Removed "RULE_4_5_A_braces_for_function_definition_should_be_located_in_seperate_line.pyc".
        Removed "RULE_4_5_A_braces_for_type_definition_should_be_located_in_seperate_line.pyc".
        Removed "RULE_4_5_A_braces_inside_of_function_should_be_located_in_end_of_line.pyc".
        Removed "RULE_4_5_A_indent_blocks_inside_of_function.pyc".
        Removed "RULE_4_5_A_matching_braces_inside_of_function_should_be_located_same_column.pyc".
        Removed "RULE_4_5_B_use_braces_even_for_one_statement.pyc".
        Removed "RULE_5_2_C_provide_doxygen_class_comment_on_class_def.pyc".
        Removed "RULE_5_2_C_provide_doxygen_namespace_comment_on_namespace_def.pyc".
        Removed "RULE_5_2_C_provide_doxygen_struct_comment_on_struct_def.pyc".
        Removed "RULE_5_3_A_provide_doxygen_function_comment_on_function_in_header.pyc".
        Removed "RULE_5_3_A_provide_doxygen_function_comment_on_function_in_impl.pyc".
        Removed "RULE_6_1_A_do_not_omit_function_parameter_names.pyc".
        Removed "RULE_6_1_E_do_not_use_more_than_5_paramters_in_function.pyc".
        Removed "RULE_6_1_G_write_less_than_200_lines_for_function.pyc".
        Removed "RULE_6_2_A_do_not_use_system_dependent_type.pyc".
        Removed "RULE_6_4_B_initialize_first_item_of_enum.pyc".
        Removed "RULE_6_5_B_do_not_use_lowercase_for_macro_constants.pyc".
        Removed "RULE_6_5_B_do_not_use_macro_for_constants.pyc".
        Removed "RULE_7_1_B_A_do_not_use_double_assignment.pyc".
        Removed "RULE_7_1_C_do_not_use_question_keyword.pyc".
        Removed "RULE_7_2_B_do_not_use_goto_statement.pyc".
        Removed "RULE_8_1_A_provide_file_info_comment.pyc".
        Removed "RULE_9_1_A_do_not_use_hardcorded_include_path.pyc".
        Removed "RULE_9_2_D_use_reentrant_function.pyc".
        Removed "RULE_A_3_avoid_too_deep_blocks.pyc".
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: tool nsiqcppstyle
Schema update: 
        [ ] Yes
Developer: Piotr Lach
Code reviewers: N/A
BA: 
QA: 

Title: [ATPCO Tax][S-317666] Validate Service and Baggage Table Application Tag /value C and E/
Date: 11/28/2013
Description:
        Implementation of story according to description.
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
Example before:
        .
Example after:
        .
Files updated:
        Taxes/AtpcoTaxes/DataModel/SafeEnumDefs.h
        Taxes/AtpcoTaxes/DataModel/SafeEnums.h
        Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        Taxes/AtpcoTaxes/Interfaces/Services/MileageCache.cpp
        Taxes/AtpcoTaxes/Rules/BusinessRulesContainer.cpp
        Taxes/AtpcoTaxes/Rules/FlatTaxApplicator.cpp
        Taxes/AtpcoTaxes/Rules/PaymentDetail.cpp
        Taxes/AtpcoTaxes/Rules/PaymentDetail.h
        Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.cpp
        Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.h
        Taxes/AtpcoTaxes/Rules/PercentageTaxRule.cpp
        Taxes/AtpcoTaxes/Rules/PercentageTaxRule.h
        Taxes/AtpcoTaxes/Rules/ServiceBaggageApplicator.cpp
        Taxes/AtpcoTaxes/Rules/ServiceBaggageApplicator.h
        Taxes/AtpcoTaxes/Rules/ServiceBaggageRule.cpp
        Taxes/AtpcoTaxes/Rules/ServiceBaggageRule.h
        Taxes/AtpcoTaxes/Rules/TaxOnTaxApplicator.cpp
        Taxes/AtpcoTaxes/Rules/YqYrApplicator.cpp
        Taxes/AtpcoTaxes/Rules/YqYrApplicator.h
        Taxes/AtpcoTaxes/Rules/YqYrRule.cpp
        Taxes/AtpcoTaxes/Rules/YqYrRule.h
        Taxes/LegacyFacades/DaoDataFormatConverter.cpp
        Taxes/TestServer/Facades/LocCacheServer.cpp
        Taxes/TestServer/Server/XmlParser.cpp<br>
Unit tests files:
        Taxes/AtpcoTaxes/Rules/test/FlatTaxTest.cpp
        Taxes/AtpcoTaxes/Rules/test/PercentageTaxTest.cpp
        Taxes/AtpcoTaxes/Rules/test/ServiceBaggageTest.cpp
        Taxes/AtpcoTaxes/Rules/test/TaxOnTaxTest.cpp
        Taxes/AtpcoTaxes/Rules/test/YqYrTest.cpp
        Taxes/AtpcoTaxes/test/PaymentDetailMock.cpp
        Taxes/AtpcoTaxes/test/PaymentDetailMock.h
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Aleksander Hryniewiecki
Code reviewers: Piotr Lach
BA: 
QA: Dawid Buszko

Title: [ATPCO Tax] Fix Jira ATPCO-95
Date: 12/12/2013
Description:
        Fixed Jira: https://jira.sabre.com/browse/ATPCO-95
Applies to: 
        [X] all agencies
        [X] all airlines
        [ ] Abacus
        [ ] Axess
        [ ] LAN
        [ ] Other: 
Activated by/Configuration change:
        .
Resolution/QA recommendation:
Entry/XML to recreate:
        <TaxRq>
          <Passenger />
          <PointOfSale PointOfSaleLoc="DAL" />
          <TicketingOptions PaymentCurrency="USD" TicketingDate="2013-12-09" TicketingTime="11:00" />
          <ProcessingOptions />
          <GeoPath>
            <Geo Loc="DFW" Type="D" />
            <Geo Loc="MEX" Type="A" />
          </GeoPath>
          <FarePath>
            <FareUsage Index="0" />
          </FarePath>
          <GeoPathMapping>
            <Mapping>
              <Map Index="0" />
              <Map Index="1" />
            </Mapping>
          </GeoPathMapping>
          <Fare Amount="100" BasisCode="X2RE" Directionality="O" OneWayRoundTrip="O" TypeCode="EU" />
          <Flight ArrivalDateShift="0" ArrivalTime="16:00" DepartureTime="12:00" MarketingCarrier="AA" />
          <Itin FarePathGeoPathMappingIndex="0" FarePathIndex="0" GeoPathIndex="0" Id="0" PassengerIndex="0" TravelOriginDate="2014-01-08" YqYrPathGeoPathMappingIndex="0" YqYrPathIndex="0">
            <FlightUsage ConnectionDateShift="0" FlightIndex="0" />
          </Itin>
          <TestData>
            <RulesRecord TAXAPPLIESTOTAGIND="A" NATION="US" PERCENTFLATTAG="P" SEQNO="107" TAXABLEUNITTAG1="X" TAXABLEUNITTAG9=" " TAXAMT="0" TAXCODE="AA" TAXPERCENT="1000000" TAXPOINTTAG="D" TAXTYPE="001" VENDOR="ATP" />
            <Loc LocCode="DAL" NationCode="US" />
            <Loc LocCode="MEX" NationCode="MX" />
            <Loc LocCode="DFW" NationCode="US" />
          </TestData>
          <YqYr Amount="66" Code="YQ" Type="F" />
          <YqYrPath>
            <YqYrUsage Index="0" />
          </YqYrPath>
        </TaxRq>
Example before:
        <TaxRs>
          <Itins>
            <Itin Id="0" />
          </Itins>
        </TaxRs>
Example after:
        <TaxRs>
          <Itins>
            <Itin Id="0">
              <Tax Nation="US" TaxCode="AA" TaxType="001" TaxPointTag="D" PercentFlatTag="P" TotalAmt="66">
                <TaxDetail TaxAmt="1" SeqNo="107" TaxPointLoc1="DFW" TaxPointLoc1Index="0" TaxPointLoc2="MEX" TaxPointLoc2Index="1" TaxEquivAmt="66" TaxEquivCurr="USD" TaxLabel="" />
              </Tax>
            </Itin>
          </Itins>
        </TaxRs>
Files updated:
        Taxes/AtpcoTaxes/Interfaces/Db/RulesRecord.h
        Taxes/AtpcoTaxes/Rules/PercentageTaxApplicator.cpp
Unit tests files:
DB: 
        [ ] DB query update: 
        [ ] DAO version number change: 
        DBA contact: 
Application impact: 
        [ ] WP
        [ ] WPNC
        [ ] WPA
        [ ] Shopping
        [ ] Fare Display
        [ ] Historical
        [ ] Taxes
        [ ] Currency
        [ ] Mileage
        [ ] Baggage
        [ ] Reissue/Exchange
        [ ] Other: 
Schema update: 
        [ ] Yes
Developer: Aleksander Hryniewiecki
Code reviewers: .
BA: 
QA: Bartosz Kwiecien

